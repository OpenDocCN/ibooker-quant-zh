- en: Chapter 10\. Candlestick-Based Trend-Following Strategies
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第十章\. 基于蜡烛图的趋势跟踪策略
- en: Pattern recognition is only one part of the equation. When you a find a pattern,
    you are most likely to use it within a wider trading framework, as trading systems
    relying purely on candlestick patterns are unlikely to yield consistent and stable
    positive returns.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 模式识别只是方程式的一部分。当您发现一种模式时，您最有可能将其用于更广泛的交易框架中，因为仅依赖于蜡烛图形态的交易系统不太可能产生一致且稳定的正回报。
- en: This chapter discusses some examples of strategies you can use to filter the
    patterns using specific technical rules when dealing with trend following. Each
    market has its own characteristics and must have optimized strategy parameters,
    which is why I recommend you focus on understanding the main ideas and concepts
    rather than take away the exact parameters of the strategies presented in this
    chapter.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论了一些示例策略，您可以使用这些策略来使用特定技术规则来过滤趋势跟踪时的模式。每个市场都有其特点，必须具有优化的策略参数，这就是为什么我建议您专注于理解主要思想和概念，而不是记住本章中提出的策略的确切参数。
- en: Ideally, the strategies should help you understand how to combine the different
    candlestick patterns (classic and modern) with some technical indicators. I also
    discuss the indicators in this chapter so that you understand their mechanisms
    and their weaknesses.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，这些策略应该帮助您理解如何将不同的蜡烛图形态（经典和现代）与一些技术指标结合起来。本章还讨论了这些指标，以便您了解它们的机制和局限性。
- en: Note
  id: totrans-4
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: '*Filtering* refers to the concept of choosing the signals that have a better
    probability of providing a positive return.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*过滤* 是指选择那些可能提供正回报概率更高的信号的概念。'
- en: Combining the Double Trouble Pattern with the RSI
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合Double Trouble模式和RSI
- en: As a reminder, the Double Trouble pattern is a modern trend-following candlestick
    configuration that incorporates volatility in its characteristics (calculated
    using the ATR indicator). The RSI is an indicator that, as discussed previously
    in the book, reinterprets the market’s momentum into values between 0 and 100
    to better understand the current dynamic.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 作为提醒，Double Trouble模式是一种现代趋势跟踪蜡烛图形态，其特征包括波动性（使用ATR指标计算）。正如在本书中前面讨论的那样，RSI是一种指标，重新解释市场动量为0到100之间的值，以更好地理解当前的动态。
- en: Even though the RSI is a contrarian indicator, I will show you a technique for
    using it within a trend-following framework.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管RSI是一种反向指标，我将向您展示如何在趋势跟踪框架内使用它的技术。
- en: This strategy uses the RSI as a filter for the detected Double Trouble patterns.
    This means that whenever a pattern is found, it is run through an RSI filter to
    validate the signal.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 此策略使用RSI作为检测到的Double Trouble模式的过滤器。这意味着每当发现一种模式时，都会通过RSI过滤器来验证信号。
- en: Note
  id: totrans-10
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The RSI can also be a momentum gauge. Therefore, values above 50 represent bullish
    momentum (uptrend) while values below 50 represent bearish momentum (downtrend).
    This is one way to use the RSI as a trend-following indicator.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: RSI也可以作为动量计。因此，高于50的值表示看涨动量（上涨趋势），而低于50的值表示看跌动量（下跌趋势）。这是使用RSI作为趋势跟踪指标的一种方式。
- en: 'The trading conditions of the strategy are as follows:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 策略的交易条件如下：
- en: A long signal is generated whenever a bullish Double Trouble pattern appears
    while the 14-period RSI is above 50.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当14周期RSI高于50时，出现看涨的Double Trouble模式时会生成一个长信号。
- en: A short signal is generated whenever a bearish Double Trouble pattern appears
    while the 14-period RSI is below 50.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当14周期RSI低于50时，出现看跌的Double Trouble模式时会生成一个短信号。
- en: The filter is therefore the value of the RSI relative to the neutrality level
    of 50\. This is used to increase the hit ratio of the trades using the invisible
    hand mechanism.^([1](ch10.xhtml#idm46762853123120)) The basic intuition of the
    strategy is to take only bullish signals in a bullish regime and only bearish
    signals in a bearish regime.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，过滤器是相对于50的RSI值。这是用来通过隐形手机制提高交易命中率的。^([1](ch10.xhtml#idm46762853123120)) 策略的基本直觉是在牛市中仅采取看涨信号，在熊市中仅采取看跌信号。
- en: 'The following code snippet shows how to code the signal function of the strategy:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段展示了如何编写策略的信号函数：
- en: '[PRE0]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Notice the addition of the filter through the RSI line of code stating its value
    relative to the neutrality level 50\. [Figure 10-1](#figure10-1) shows a signal
    chart on USDCAD.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到通过RSI代码行添加过滤器，说明其相对于中性水平50的值。[图 10-1](#figure10-1) 显示了USDCAD的信号图表。
- en: You can always tweak the strategy so that it better fits your profile and the
    market’s characteristics. However, you should keep in mind that the RSI is not
    a miraculous predictor of trend as it is price-derived and therefore lagging (that
    is, it does not predict the future but simply tells the story of the past). Also,
    the RSI tends to break and reintegrate the 50 level many times, which may give
    faulty signals.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 你始终可以调整策略，使其更适合你的配置和市场特征。然而，你应该记住，RSI并非预测趋势的神奇工具，因为它是基于价格的，并且是滞后的（即，它不预测未来，只是讲述过去的故事）。此外，RSI倾向于多次突破和重新整合50水平，这可能会产生错误的信号。
- en: '![](assets/mfpr_1001.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1001.png)'
- en: Figure 10-1\. Signal chart of the strategy using the Double Trouble pattern
    and the RSI
  id: totrans-21
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-1\. 使用双重麻烦图案和相对强弱指数（RSI）策略的信号图表
- en: Combining the Three Candles Pattern with Moving Averages
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合三根蜡烛图案和移动平均线
- en: Moving averages are great trend filters and help in determining whether to take
    the signal or not. Remember, a *moving average* is a mean that follows the market
    price using a rolling window. This strategy uses two trend-following elements
    from different fields^([2](ch10.xhtml#idm46762852840176)) in order to give a signal.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 移动平均线是很好的趋势过滤器，有助于确定是否执行信号。记住，*移动平均线*是一种使用滚动窗口跟随市场价格的均值。这种策略结合了来自不同领域的两种趋势跟随元素^([2](ch10.xhtml#idm46762852840176))，以便发出信号。
- en: The Three Candles pattern is a trend-following configuration composed of big-bodied
    homogenous successive candlesticks that confirm the underlying trend. Generally,
    a bullish Three Candles pattern is called Three White Soldiers, while the bearish
    version is called Three Black Crows.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 三根蜡烛图案是由连续的大体积同类蜡烛线组成的趋势跟随配置，确认了底层趋势。一般来说，看涨的三根蜡烛图案被称为三白兵，而看跌的版本被称为三黑鸦。
- en: Note
  id: totrans-25
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Similar to using the RSI as a trend follower, using moving averages is extremely
    useful in determining the underlying trend.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于使用RSI作为趋势跟随者，使用移动平均线在确定底层趋势方面非常有用。
- en: When you see a market above its moving average (for example, a 100-period moving
    average), it is generally a sign that a bullish regime is in progress, and when
    you see a market below its moving average, it is generally a sign that a bearish
    regime is in progress, thus indicating which type of signal to prefer.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 当你看到市场价格高于其移动平均线（例如，100 周期移动平均线）时，通常表明牛市正在进行，而当你看到市场价格低于其移动平均线时，则通常表明熊市正在进行，从而指示了应该偏好哪种类型的信号。
- en: 'The trading conditions of the strategy are as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 该策略的交易条件如下：
- en: A long signal is generated whenever a Three White Soldiers pattern appears while
    the market price is above its 100-period moving average.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格高于其100周期移动平均线时，出现三白兵图案时生成长期信号。
- en: A short signal is generated whenever a Three Black Crows pattern appears while
    the market price is below its 100-period moving average.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格低于其100周期移动平均线时，出现三黑鸦图案时生成短期信号。
- en: Note
  id: totrans-31
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The trend-following strategies use a combination of a candlestick pattern and
    a trend filter that increases the conviction in the trade. Although historical
    back-testing shows that the hit ratio is not always increased with the filter,
    for some markets, the ratio is significantly enhanced.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 趋势跟随策略使用蜡烛图形态和趋势过滤器的组合，增加了交易的信心。尽管历史回测显示，过滤器并不总是能提高命中率，但对于某些市场来说，这一比率显著提升。
- en: 'The following code snippet shows how to code the signal function of the strategy:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段显示了如何编写该策略的信号函数：
- en: '[PRE1]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[Figure 10-2](#figure10-2) shows an example of a signal chart with a 100-period
    moving average (the swooping line starting at the upper left), which acts as a
    filter. Notice how you see only bullish signals when the market is above its moving
    average and see only bearish signals when the market is below its moving average.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 10-2](#figure10-2) 展示了一个使用 100 周期移动平均线（从左上角开始的弯曲线）作为过滤器的信号图表示例。注意，当市场价格高于其移动平均线时，你只会看到看涨信号，而当市场价格低于其移动平均线时，你只会看到看跌信号。'
- en: '![](assets/mfpr_1002.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1002.png)'
- en: Figure 10-2\. Signal chart of the strategy using the Three Candles pattern and
    moving averages
  id: totrans-37
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-2\. 使用三根蜡烛图案和移动平均线策略的信号图表
- en: The strategy is best used in confirmation of other trend-following strategies.
    For example, a fundamental trader has a carry trade in USDJPY and sees that a
    Three White Soldiers pattern has emerged while the market is above its 100-period
    moving average. This observation can serve as a conviction enhancer or a confirmation
    to add more to the position. After all, trading is a numbers game, and stacking
    up the odds on your side increases the probability of gain.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 该策略最适合与其他趋势跟随策略一起使用。例如，一个基本交易者在USDJPY上有一个带息交易，并看到出现了三个白兵模式，同时市场位于其100期移动平均线之上。这种观察可以作为信念增强剂或确认以增加头寸。毕竟，交易是数字游戏，而将胜算累积到你这边则增加了获利的概率。
- en: Note
  id: totrans-39
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: A *fundamental trader* is a trader who relies on economic and financial analysis
    instead of technical analysis to make their decisions.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*基本交易者*是依靠经济和金融分析而非技术分析做决策的交易者。'
- en: A *carry trade* is a currency position that entails going long on (buying) the
    currency with the higher interest rate and shorting (selling) the currency with
    the lower interest rate to benefit from the interest rate differential.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '*带息交易*是一种通过买入利率较高的货币并卖出利率较低的货币来获利于利率差异的货币头寸。'
- en: Combining the Bottle Pattern with the Stochastic Oscillator
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合瓶形图案与随机振荡器
- en: Similar to the RSI, the stochastic oscillator is a momentum indicator heavily
    used in technical trading and known both to the retail and professional communities.
    The *stochastic oscillator* uses a basic normalization function to trap the values
    between 0 and 100\. It is easier to calculate than the RSI. Before discussing
    the oscillator, let’s look at the concept of *normalization*.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 与RSI类似，随机振荡器是一种动量指标，在技术交易中广泛使用，并被零售和专业社区广泛知晓。*随机振荡器*使用基本的归一化函数将值困在0到100之间。它比RSI更容易计算。在讨论振荡器之前，让我们看一下*归一化*的概念。
- en: 'Whenever you have an array of different unbounded values such as the market
    price (or any other random set of time series), you can normalize the values between
    0 and 1, with 0 being the lowest value for a specific time window and 1 being
    the highest value for a specific time window. Take a look at this table:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 每当你有一个不同未界定值的数组，比如市场价格（或任何其他随机时间序列），你可以将这些值归一化到0到1之间，其中0是特定时间窗口的最低值，1是特定时间窗口的最高值。看看这个表格：
- en: '| Time step | 1 | 2 | 3 | 4 | 5 |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| 时间步骤 | 1 | 2 | 3 | 4 | 5 |'
- en: '| --- | --- | --- | --- | --- | --- |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- |'
- en: '| **Value** | 10 | 40 | 5 | 90 | 25 |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| **数值** | 10 | 40 | 5 | 90 | 25 |'
- en: '| Normalized value | 0.06 | 0.41 | **0.00** | **1.00** | 0.24 |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| 标准化值 | 0.06 | 0.41 | **0.00** | **1.00** | 0.24 |'
- en: The table shows that when the variable moves in time from period 1 to period
    5, the normalized values show that they can be bounded between 0 and 1, with 0
    referring to the lowest value (5) and 1 referring to the highest value (90). Similarly,
    notice how the value that lies approximately between 0 and 1 has a normalized
    value of 0.41, which means it is probably the middle value. This is normal as
    40 is around half the distance between 5 and 90.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 表格显示，当变量从第1期到第5期移动时，归一化值显示它们可以在0到1之间，0指的是特定时间窗口的最低值（5），1指的是特定时间窗口的最高值（90）。同样，注意到大约在0到1之间的值具有归一化值0.41，这意味着它可能是中间值。这是正常的，因为40大约是5和90之间距离的一半。
- en: 'The following formula shows how to normalize any value between 0 and 1 given
    a specific time window:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的公式展示了如何在特定时间窗口内将任何值归一化到0到1之间：
- en: <math alttext="x Subscript Normalized Baseline equals StartFraction x Subscript
    Original Baseline minus x Subscript Low Baseline Over x Subscript High Baseline
    minus x Subscript Low Baseline EndFraction"><mrow><msub><mi>x</mi> <mtext>Normalized</mtext></msub>
    <mo>=</mo> <mfrac><mrow><msub><mi>x</mi> <mtext>Original</mtext></msub> <mo>-</mo><msub><mi>x</mi>
    <mtext>Low</mtext></msub></mrow> <mrow><msub><mi>x</mi> <mtext>High</mtext></msub>
    <mo>-</mo><msub><mi>x</mi> <mtext>Low</mtext></msub></mrow></mfrac></mrow></math>
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="x Subscript Normalized Baseline equals StartFraction x Subscript
    Original Baseline minus x Subscript Low Baseline Over x Subscript High Baseline
    minus x Subscript Low Baseline EndFraction"><mrow><msub><mi>x</mi> <mtext>Normalized</mtext></msub>
    <mo>=</mo> <mfrac><mrow><msub><mi>x</mi> <mtext>Original</mtext></msub> <mo>-</mo><msub><mi>x</mi>
    <mtext>Low</mtext></msub></mrow> <mrow><msub><mi>x</mi> <mtext>High</mtext></msub>
    <mo>-</mo><msub><mi>x</mi> <mtext>Low</mtext></msub></mrow></mfrac></mrow></math>
- en: 'Let’s try an example using the previous table. Take the value 10 and try to
    normalize it using the formula. You should have the following calculation:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过前面的表格来尝试一个例子。取值为10，尝试使用公式进行归一化。你应该得到以下计算：
- en: <math alttext="x Subscript Normalized Baseline equals StartFraction 10 minus
    5 Over 90 minus 5 EndFraction equals 0.06"><mrow><msub><mi>x</mi> <mtext>Normalized</mtext></msub>
    <mo>=</mo> <mfrac><mrow><mn>10</mn><mo>-</mo><mn>5</mn></mrow> <mrow><mn>90</mn><mo>-</mo><mn>5</mn></mrow></mfrac>
    <mo>=</mo> <mn>0</mn> <mo lspace="0%" rspace="0%">.</mo> <mn>06</mn></mrow></math>
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="x Subscript Normalized Baseline equals StartFraction 10 minus
    5 Over 90 minus 5 EndFraction equals 0.06"><mrow><msub><mi>x</mi> <mtext>Normalized</mtext></msub>
    <mo>=</mo> <mfrac><mrow><mn>10</mn><mo>-</mo><mn>5</mn></mrow> <mrow><mn>90</mn><mo>-</mo><mn>5</mn></mrow></mfrac>
    <mo>=</mo> <mn>0</mn> <mo lspace="0%" rspace="0%">.</mo> <mn>06</mn></mrow></math>
- en: 'The stochastic oscillator normalizes the market price in a modified way by
    incorporating the highs and lows in the formula so that it becomes as follows:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 随机振荡器以修改的方式将市场价格归一化，通过在公式中结合高点和低点使其变为以下形式：
- en: <math alttext="Stochastic value Subscript i Baseline equals StartFraction Close
    Subscript i Baseline minus Low Subscript i minus n colon i Baseline Over High
    Subscript i minus n colon i Baseline minus Low Subscript i minus n colon i Baseline
    EndFraction"><mrow><mtext>Stochastic</mtext> <msub><mtext>value</mtext> <mi>i</mi></msub>
    <mo>=</mo> <mfrac><mrow><msub><mtext>Close</mtext> <mi>i</mi></msub> <mo>-</mo><msub><mtext>Low</mtext>
    <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub></mrow>
    <mrow><msub><mtext>High</mtext> <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub>
    <mo>-</mo><msub><mtext>Low</mtext> <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub></mrow></mfrac></mrow></math>
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="Stochastic value Subscript i Baseline equals StartFraction Close
    Subscript i Baseline minus Low Subscript i minus n colon i Baseline Over High
    Subscript i minus n colon i Baseline minus Low Subscript i minus n colon i Baseline
    EndFraction"><mrow><mtext>Stochastic</mtext> <msub><mtext>value</mtext> <mi>i</mi></msub>
    <mo>=</mo> <mfrac><mrow><msub><mtext>Close</mtext> <mi>i</mi></msub> <mo>-</mo><msub><mtext>Low</mtext>
    <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub></mrow>
    <mrow><msub><mtext>High</mtext> <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub>
    <mo>-</mo><msub><mtext>Low</mtext> <mrow><mi>i</mi><mo>-</mo><mi>n</mi><mo>:</mo><mi>i</mi></mrow></msub></mrow></mfrac></mrow></math>
- en: The formula means that the current value of the stochastic is the difference
    between the current close price minus the lowest low price for a set lookback
    period divided by the difference between the highest high price and the lowest
    low price for the same lookback period.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 公式意味着随机变量的当前值是当前收盘价减去设定的回看期内最低低价之间的差异，再除以相同回看期内最高高价与最低低价之间的差异。
- en: Note
  id: totrans-57
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: The difference between the simple normalization function and the stochastic
    oscillator’s function is the addition of the high price and low price to the latter.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 简单归一化函数与随机震荡器函数的区别在于后者增加了高价和低价。
- en: 'The stochastic oscillator can be described as the smoothed version of the previous
    formula, and it is generally charted with a short-term moving average calculated
    on its value, called the *signal line*. To create the default stochastic oscillator,
    follow these steps:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 随机震荡器可以被描述为前一个公式的平滑版本，并且通常与其值上计算的短期移动平均线一起绘制，称为*信号线*。要创建默认的随机震荡器，请按照以下步骤进行：
- en: Normalize the values using the stochastic oscillator’s function using a rolling
    window of 14 periods.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用14期滚动窗口归一化随机震荡器函数的值。
- en: Smooth out the result from the first step with a three-period moving average.
    This is the stochastic oscillator.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用三期移动平均线平滑第一步骤的结果。这就是随机震荡器。
- en: Calculate the signal line, which is another three-period moving average calculated
    on the values of the second step. This is the signal line.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算信号线，这是在第二步骤的值上计算的另一个三期移动平均线。这就是信号线。
- en: Note
  id: totrans-63
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The first moving average calculated on the stochastic oscillator is referred
    to as *smoothing*, while the signal line is referred to as *slowing*.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在随机震荡器上计算的第一个移动平均线称为*平滑*，而信号线称为*放缓*。
- en: Similar to the RSI, the stochastic oscillator is bounded between 0 and 100 and
    has an oversold zone below 20 and an overbought zone above 80\. Because of its
    formula, it is relatively more volatile than the RSI and tends to move from one
    extreme to another faster.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 与RSI类似，随机震荡器限于0到100之间，超卖区在20以下，超买区在80以上。由于其公式，它比RSI更具波动性，并且倾向于更快地从一个极端移动到另一个极端。
- en: Many techniques are possible with the stochastic oscillator, but the one that
    interests us is the cross between it and its signal line. This is referred to
    as the *cross technique* and is famous in contrarian strategies. (However, I am
    using it with a trend-following candlestick pattern and therefore turning it into
    a trend-following technique.)
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 随机震荡器有许多技术，但我们感兴趣的是它与信号线的交叉。这被称为*交叉技术*，在逆向策略中很有名。 (然而，我将其与趋势跟随蜡烛图形模式一起使用，因此将其转变为趋势跟随技术。)
- en: Note
  id: totrans-67
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: You must be careful with the stochastic oscillator as it tends to stick to the
    extremes from time to time due to the nature of the normalization function, thus
    providing false signals. The stickiness effect is manifested when the oscillator
    remains in the oversold and overbought zones for extended periods of time.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 由于归一化函数的性质，你必须小心随机震荡器有时会粘在极端值上，从而产生虚假信号。这种粘性效应表现为振荡器长时间停留在超卖和超买区域。
- en: 'The following snippet shows how to code the stochastic oscillator:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段展示了如何编写随机震荡器：
- en: '[PRE2]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The trading conditions of the strategy are as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 该策略的交易条件如下：
- en: A long signal is generated whenever a bullish Bottle pattern appears while the
    stochastic oscillator is above its signal line.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当随机震荡器高于其信号线时出现牛瓶形态时生成长信号。
- en: A short signal is generated whenever a bearish Bottle pattern appears while
    the stochastic oscillator is below its signal line.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当随机震荡器低于其信号线时出现熊瓶形态时生成短信号。
- en: 'The following code snippet shows how to code the signal function of the strategy:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段展示了如何编写策略的信号函数：
- en: '[PRE3]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[Figure 10-3](#figure10-3) shows the signal chart on USDCHF.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 10-3](#figure10-3) 显示了USDCHF的信号图表。'
- en: '![](assets/mfpr_1003.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1003.png)'
- en: Figure 10-3\. Signal chart of the strategy using the Bottle pattern and the
    stochastic oscillator
  id: totrans-78
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-3\. 使用瓶形态和随机震荡器的策略信号图表
- en: Combining the Marubozu Pattern with K’s Volatility Bands
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合丸坐模式与K的波动带
- en: Let’s get to square one with the first candlestick pattern covered in this book.
    The Marubozu pattern can be considered the most powerful candlestick since it
    has no wicks, meaning that the market went straight from one point to another
    without hesitation.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从本书中涵盖的第一个蜡烛图案重新开始。丸坐模式可以被认为是最强大的蜡烛图案，因为它没有影线，意味着市场直接从一个点到另一个点而没有犹豫。
- en: This strategy uses a concept known as a *volatility band*, which is a framing
    technique that envelops the market price to deliver dynamic support and resistance
    levels.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 此策略使用一种称为*波动带*的概念，这是一种包围市场价格以提供动态支撑和阻力水平的框架技术。
- en: Note
  id: totrans-82
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: There are many types of volatility bands. The most well-known are Bollinger
    bands. The reliability of different types of volatility bands depends on the underlying
    markets and their parameters.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多类型的波动率带。最著名的是布林带。不同类型的波动率带的可靠性取决于基础市场及其参数。
- en: Before you can grasp K’s volatility bands, you have to understand the basics
    of Bollinger bands. Developed by John Bollinger, the bands are more statistical
    in nature than technical.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在掌握K的波动率带之前，您必须了解布林带的基础知识。由约翰·波林格（John Bollinger）开发，这些带子的性质更倾向于统计而非技术。
- en: 'Consider the following list: {11, 4, 5, 20}. Given the four values, how would
    you describe the elements? Generally, the best measure that describes elements
    in a list is the mean. It is also the best estimate of the next expected value
    (if you were to add a new element chronologically). To calculate the mean of a
    list, follow this formula:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下列表：{11, 4, 5, 20}。给定这四个值，您如何描述这些元素？一般来说，描述列表中元素的最佳指标是均值。它也是下一个预期值的最佳估计（如果您按时间顺序添加新元素）。要计算列表的均值，请按照以下公式操作：
- en: <math alttext="chi equals StartFraction 1 Over n EndFraction left-parenthesis
    sigma-summation Underscript i equals 1 Overscript n Endscripts x Subscript i Baseline
    right-parenthesis equals StartFraction x 1 plus x 2 plus period period period
    plus x Subscript n Baseline Over n EndFraction"><mrow><mi>χ</mi> <mo>=</mo> <mfrac><mn>1</mn>
    <mi>n</mi></mfrac> <mrow><mo>(</mo> <msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msub><mi>x</mi> <mi>i</mi></msub> <mo>)</mo></mrow> <mo>=</mo>
    <mfrac><mrow><msub><mi>x</mi> <mn>1</mn></msub> <mo>+</mo><msub><mi>x</mi> <mn>2</mn></msub>
    <mo>+</mo><mo lspace="0%" rspace="0%">.</mo><mo lspace="0%" rspace="0%">.</mo><mo
    lspace="0%" rspace="0%">.</mo><mo>+</mo><msub><mi>x</mi> <mi>n</mi></msub></mrow>
    <mi>n</mi></mfrac></mrow></math>
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="chi equals StartFraction 1 Over n EndFraction left-parenthesis
    sigma-summation Underscript i equals 1 Overscript n Endscripts x Subscript i Baseline
    right-parenthesis equals StartFraction x 1 plus x 2 plus period period period
    plus x Subscript n Baseline Over n EndFraction"><mrow><mi>χ</mi> <mo>=</mo> <mfrac><mn>1</mn>
    <mi>n</mi></mfrac> <mrow><mo>(</mo> <msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msub><mi>x</mi> <mi>i</mi></msub> <mo>)</mo></mrow> <mo>=</mo>
    <mfrac><mrow><msub><mi>x</mi> <mn>1</mn></msub> <mo>+</mo><msub><mi>x</mi> <mn>2</mn></msub>
    <mo>+</mo><mo lspace="0%" rspace="0%">.</mo><mo lspace="0%" rspace="0%">.</mo><mo
    lspace="0%" rspace="0%">.</mo><mo>+</mo><msub><mi>x</mi> <mi>n</mi></msub></mrow>
    <mi>n</mi></mfrac></mrow></math>
- en: 'Therefore, according to the formula, you must sum them and divide the result
    by their quantity:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，根据公式，您必须将它们相加，并将结果除以它们的数量：
- en: <math alttext="chi equals StartFraction 11 plus 4 plus 5 plus 20 Over 4 EndFraction
    equals 10"><mrow><mi>χ</mi> <mo>=</mo> <mfrac><mrow><mn>11</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>20</mn></mrow>
    <mn>4</mn></mfrac> <mo>=</mo> <mn>10</mn></mrow></math>
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="chi equals StartFraction 11 plus 4 plus 5 plus 20 Over 4 EndFraction
    equals 10"><mrow><mi>χ</mi> <mo>=</mo> <mfrac><mrow><mn>11</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>5</mn><mo>+</mo><mn>20</mn></mrow>
    <mn>4</mn></mfrac> <mo>=</mo> <mn>10</mn></mrow></math>
- en: Hence, the mean of the list is 10. Remember the concept of volatility from previous
    chapters where you use the ATR to approximate the fluctuations of the price relative
    to a past period. The bands use another technique to calculate volatility, which
    is the one used in descriptive statistics, that is, standard deviation.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，列表的均值为10。在前几章中，记住波动性的概念，您使用ATR来近似价格相对于过去时期的波动。带子使用另一种技术来计算波动性，即描述性统计中使用的标准差。
- en: '*Standard deviation* is the square root of the squared deviations of each variable
    from the group’s mean. The concept may sound complicated, but let’s simplify it
    in a few steps:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*标准差*是变量与组均值的平方偏差的平方根。这个概念可能听起来复杂，但让我们简化几个步骤：'
- en: Calculate the distance of each variable (the close price) from the mean of the
    lookback period at the same time step.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算每个变量（收盘价）在同一时间步长内与回溯期均值的距离。
- en: Square the distances so that you do not get negative values.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对这些距离进行平方，以避免获得负值。
- en: Calculate the mean of these squared distances. The result is called the *variance*.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算这些平方距离的均值。结果称为*方差*。
- en: Calculate the square root of the variance. The result is called the *standard
    deviation*.
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算方差的平方根。结果称为*标准差*。
- en: Note
  id: totrans-95
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Taking the square root in the last step allows you to compare apples to apples
    with the mean.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后一步中取平方根，使您能够将均值进行苹果与苹果的比较。
- en: 'Mathematically speaking, the formula of the standard deviation is expressed
    as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 从数学角度来说，标准差的公式如下所示：
- en: <math alttext="sigma equals StartRoot StartFraction 1 Over n EndFraction sigma-summation
    Underscript i equals 1 Overscript n Endscripts left-parenthesis x Subscript i
    Baseline minus chi right-parenthesis squared EndRoot"><mrow><mi>σ</mi> <mo>=</mo>
    <msqrt><mrow><mfrac><mn>1</mn> <mi>n</mi></mfrac> <msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msup><mrow><mo>(</mo><msub><mi>x</mi> <mi>i</mi></msub>
    <mo>-</mo><mi>χ</mi><mo>)</mo></mrow> <mn>2</mn></msup></mrow></msqrt></mrow></math>
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="sigma equals StartRoot StartFraction 1 Over n EndFraction sigma-summation
    Underscript i equals 1 Overscript n Endscripts left-parenthesis x Subscript i
    Baseline minus chi right-parenthesis squared EndRoot"><mrow><mi>σ</mi> <mo>=</mo>
    <msqrt><mrow><mfrac><mn>1</mn> <mi>n</mi></mfrac> <msubsup><mo>∑</mo> <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
    <mi>n</mi></msubsup> <msup><mrow><mo>(</mo><msub><mi>x</mi> <mi>i</mi></msub>
    <mo>-</mo><mi>χ</mi><mo>)</mo></mrow> <mn>2</mn></msup></mrow></msqrt></mrow></math>
- en: 'Now that you know how to calculate a moving average, you can simply apply a
    rolling standard deviation measure, which is the same as a moving average except
    you are calculating a rolling volatility. Bollinger bands are found as follows:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经知道如何计算移动平均线，您可以简单地应用滚动标准差测量，这与移动平均线相同，只是您在计算滚动波动性。
- en: The upper Bollinger band is the sum of the current 20-period moving average
    and the current standard deviation multiplied by 2.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上布林带是当前20周期移动平均值与当前标准差乘以2的和。
- en: The lower Bollinger band is the difference between the current 20-period moving
    average and the current standard deviation multiplied by 2.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下布林带是当前20周期移动平均值与当前标准差乘以2的差。
- en: Note
  id: totrans-102
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: The constant (2 by default) is multiplied by the standard deviation’s value,
    and then the product is summed or subtracted from the current value of the moving
    average.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 常数（默认为2）乘以标准偏差的值，然后将乘积加或减去当前移动平均值。
- en: '[Figure 10-4](#figure10-4) shows an example with Bollinger bands applied on
    USDCHF. Some traders like to keep the middle line (which is simply the 20-period
    moving average). However, with Bollinger bands, the line does not provide as much
    value as the bands themselves.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 10-4](#figure10-4) 显示了应用在USDCHF上的布林带示例。一些交易者喜欢保持中线（即20周期移动平均线）。然而，对于布林带来说，该线并不像带子本身那样有价值。'
- en: '![](assets/mfpr_1004.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1004.png)'
- en: Figure 10-4\. An example of Bollinger bands applied on USDCHF
  id: totrans-106
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 10-4\. 在USDCHF上应用布林带的示例
- en: Generally, when the market reaches the lower Bollinger band, it is believed
    to be oversold, and a bullish reacted is expected. Similarly, when the market
    reaches the upper Bollinger band, it is believed to be overbought, and a bearish
    reacted is expected.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，当市场达到下布林带时，被认为是超卖的，预期将出现看涨反应。同样，当市场达到上布林带时，被认为是超买的，并且预期将出现看跌反应。
- en: 'Let’s now look at K’s volatility bands, which are inspired by Bollinger bands.
    They follow these conditions:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看一下K的波动带，它受布林带的启发。它遵循以下条件：
- en: Calculate the mean between the highest highs and the lowest lows of the last
    20 periods.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算最近20个周期内最高高点和最低低点的均值。
- en: Calculate the highest standard deviation measure of the last 20 periods.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算最近20个周期的最高标准偏差测量。
- en: The upper volatility band is the sum of the result from the first step and the
    second step multiplied by 2.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上波动带是第一步和第二步结果的总和乘以2。
- en: The lower volatility band is the difference between the result from the first
    step and the second step multiplied by 2.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下波动带是第一步和第二步结果的差值乘以2。
- en: Note
  id: totrans-113
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Similarly, the constant (2 by default) is multiplied by the standard deviation’s
    maximum value, and then the product is summed or subtracted from the current value
    of the mean of the maximum highs and lows.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，常数（默认为2）乘以标准偏差的最大值，然后将产品与最大高低点的均值当前值相加或相减。
- en: 'The following code snippet shows the function to code K’s volatility bands:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段显示了编码K的波动带函数：
- en: '[PRE4]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note
  id: totrans-117
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Keeping the middle line is essential to the strategy as it is the main filter.
    Therefore, with K’s volatility bands, the middle line is present in the chart.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 保持中线对于策略至关重要，因为它是主要的过滤器。因此，使用K的波动带时，中线出现在图表中。
- en: Note that the words *volatility *and *standard deviation* are used interchangeably.
    [Figure 10-5](#figure10-5) shows an example with K’s volatility bands applied
    on USDCHF.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，词语*波动性*和*标准偏差*在本文中是可以互换使用的。[图10-5](#figure10-5)展示了应用在USDCHF上的K的波动带的示例。
- en: '![](assets/mfpr_1005.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1005.png)'
- en: Figure 10-5\. An example of K’s volatility bands applied on USDCHF
  id: totrans-121
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图10-5\. K的波动带应用在USDCHF上的示例
- en: 'Let’s now discuss the strategy. The trading conditions are as follows:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们讨论一下策略。交易条件如下：
- en: A long signal is generated whenever a bullish Marubozu pattern appears while
    the market price is below the middle line.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格低于中线时出现看涨光头党图案时，将生成一个长信号。
- en: A short signal is generated whenever a bearish Marubozu pattern appears while
    the market price is above the middle line.
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格高于中线时出现看跌光头党图案时，就会生成一个短信号。
- en: 'The following code snippet shows how to code the signal function of the strategy:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段显示了如何编写策略的信号函数：
- en: '[PRE5]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[Figure 10-6](#figure10-6) shows the signal chart on AUDNZD.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '[图10-6](#figure10-6)显示了AUDNZD上的信号图表。'
- en: '![](assets/mfpr_1006.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1006.png)'
- en: Figure 10-6\. Signal chart of the strategy using the Marubozu pattern and K’s
    volatility bands
  id: totrans-129
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图10-6\. 使用光头党图案和K的波动带策略的信号图表
- en: 'Optionally, you can consider the following more restraining conditions (however,
    the signals will be less frequent):'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 可选地，您可以考虑以下更严格的条件（然而，信号会更少频繁）：
- en: A long signal is generated whenever a bullish Marubozu pattern appears while
    the market price is below the lower volatility band.
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格低于下波动率带时出现看涨光头党图案时，将生成一个长信号。
- en: A short signal is generated whenever a bearish Marubozu pattern appears while
    the market price is above the upper volatility band.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当市场价格高于上波动带时出现看跌光头党图案时，将生成一个短信号。
- en: To sum up, the strategy can have fewer signals, but intuitively, it has a strong
    foundation pertaining to the most powerful candlestick (in terms of amplitude)
    and the statistical extreme.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，该策略可能会有更少的信号，但直观上它具有关于最强大蜡烛图（按振幅计算）和统计极端的坚实基础。
- en: Combining the H Pattern with the Trend Intensity Index
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将H型模式与趋势强度指数结合起来
- en: 'The *trend intensity index* (TII) measures the strength of the trend. It is
    a simple calculation created out of a moving average and price deviations around
    it to show, in a bounded appearance, the intensity of the trend. To build the
    indicator, follow these steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '*趋势强度指数*（TII）衡量趋势的强度。它是通过围绕移动平均线和价格偏差的简单计算创建的，以显示趋势的强度。要构建该指标，请按以下步骤操作：'
- en: Calculate a 20-period moving average on the market price.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在市场价格上计算20周期移动平均值。
- en: Calculate the deviations of the market price from the moving average. This is
    done by doing so on two columns. If the close price is greater than its moving
    average, then the first column is filled by the difference between the two (up
    variable), and if the current market price is lower than its moving average, then
    the second column is filled by the difference between the two (down variable).
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算市场价格与移动平均线的偏差。这可以通过在两列上完成。如果收盘价高于其移动平均值，则第一列由两者之间的差异填充（上行变量），如果当前市场价格低于其移动平均值，则第二列由两者之间的差异填充（下行变量）。
- en: Count the values where the market was above its moving average and where it
    was below it.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算市场上移动平均线之上和之下的数值。
- en: Note
  id: totrans-139
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Counting the values with certain conditions can be accomplished with the `numpy`
    function `count_nonzero()`.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`numpy`函数`count_nonzero()`可以完成具有特定条件的数值计数。
- en: 'Apply the following formula to find the TII (by default, a 20-period lookback):'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照以下公式找到TII（默认为20期回顾）来应用：
- en: <math alttext="upper T upper I upper I Subscript i Baseline equals left-parenthesis
    StartFraction Number of up Over Number of up plus Number of down EndFraction right-parenthesis
    x Baseline 100"><mrow><mi>T</mi> <mi>I</mi> <msub><mi>I</mi> <mi>i</mi></msub>
    <mo>=</mo> <mrow><mo>(</mo> <mfrac><mrow><mtext>Number</mtext><mtext>of</mtext><mtext>up</mtext></mrow>
    <mrow><mtext>Number</mtext><mtext>of</mtext><mtext>up</mtext><mo>+</mo><mtext>Number</mtext><mtext>of</mtext><mtext>down</mtext></mrow></mfrac>
    <mo>)</mo></mrow> <mi>x</mi> <mn>100</mn></mrow></math>
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: <math alttext="upper T upper I upper I Subscript i Baseline equals left-parenthesis
    StartFraction Number of up Over Number of up plus Number of down EndFraction right-parenthesis
    x Baseline 100"><mrow><mi>T</mi> <mi>I</mi> <msub><mi>I</mi> <mi>i</mi></msub>
    <mo>=</mo> <mrow><mo>(</mo> <mfrac><mrow><mtext>Number</mtext><mtext>of</mtext><mtext>up</mtext></mrow>
    <mrow><mtext>Number</mtext><mtext>of</mtext><mtext>up</mtext><mo>+</mo><mtext>Number</mtext><mtext>of</mtext><mtext>down</mtext></mrow></mfrac>
    <mo>)</mo></mrow> <mi>x</mi> <mn>100</mn></mrow></math>
- en: 'To code the TII in Python, use the following function:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Python中编码TII，请使用以下函数：
- en: '[PRE6]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Typically, a strong bullish momentum is in progress when the TII is above 50,
    and a strong bearish momentum is in progress when the TII is below 50.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，当TII高于50时，正在进行强劲的看涨动能，而当TII低于50时，正在进行强劲的看跌动能。
- en: 'The trading conditions of the strategy are as follows:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 策略的交易条件如下：
- en: A long signal is generated whenever a bullish H pattern appears while the 20-period
    TII is above 50.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当20期TII高于50时，出现看涨H型时产生长信号。
- en: A short signal is generated whenever a bearish H pattern appears while the 20-period
    TII is below 50.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每当20期TII低于50时，出现看跌H型时产生短信号。
- en: Note
  id: totrans-149
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: It is preferable to tweak the lookback of the TII to find the right adjustment.
    The H pattern, being a reversal-invalidation pattern (thus, a trend confirmation
    pattern), could work well with an indicator that shows the strength of the underlying
    trend.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 调整TII的回顾以找到合适的调整是可取的。H型模式作为逆转失效模式（因此是趋势确认模式），可能与显示基础趋势强度的指标很好地配合。
- en: 'The following code snippet shows how to code the signal function of the strategy:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的代码片段显示了如何编写策略的信号函数：
- en: '[PRE7]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[Figure 10-7](#figure10-7) shows the signal chart on EURGBP.'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '[图10-7](#figure10-7) 显示了EURGBP的信号图表。'
- en: '![](assets/mfpr_1007.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/mfpr_1007.png)'
- en: Figure 10-7\. Signal chart of the strategy using the H pattern and the trend
    intensity index
  id: totrans-155
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图10-7\. 使用H型和趋势强度指数策略的信号图表
- en: The graph shows that there was one signal that coincided with the bullish conditions.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图表显示，有一个信号与看涨条件重合。
- en: To sum up this chapter, it is important to combine the right patterns with the
    right indicators, and this is done through back-testing. Naturally, the combinations
    presented are merely examples, and more powerful combinations can be created by
    fusing other indicators with other patterns. It is also interesting to know that
    you can include multiple patterns in your strategies rather than combine just
    one pattern with one indicator.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 总结本章时，重要的是将正确的模式与正确的指标结合起来，这通过反向测试完成。当然，所提供的组合只是例子，可以通过将其他指标与其他模式融合来创建更强大的组合是非常有趣的。此外，你可以将多种模式包含在你的策略中，而不仅仅是将一个模式与一个指标结合。
- en: ^([1](ch10.xhtml#idm46762853123120-marker)) The *invisible hand mechanism* involves
    using trades in tandem with the trend, for example, only taking buy signals in
    a bullish trend while disregarding any sell signals.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](ch10.xhtml#idm46762853123120-marker)) *看不见的手机制*涉及与趋势同步使用交易，例如，在看涨趋势中仅接受买入信号，而忽略任何卖出信号。
- en: ^([2](ch10.xhtml#idm46762852840176-marker)) The Three Candles pattern comes
    from the field of pattern recognition, while moving averages come from the field
    of statistics and trend-following technical indicators.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](ch10.xhtml#idm46762852840176-marker)) 三蜡烛模式源自于模式识别领域，而移动平均则来自于统计学和趋势跟随技术指标领域。
