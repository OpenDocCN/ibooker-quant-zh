<html><head></head><body>
<div id="sbo-rt-content"><section data-pdf-bookmark="Chapter 6. Classic Contrarian Patterns" data-type="chapter" epub:type="chapter"><div class="chapter" id="chapter6">
<h1><span class="label">Chapter 6. </span>Classic Contrarian Patterns</h1>
<p>By now<a contenteditable="false" data-primary="contrarian patterns" data-type="indexterm" id="ix_contra_patt_ch6_7"/><a contenteditable="false" data-primary="classic contrarian patterns" data-type="indexterm" id="ix_class_contra_ch6"/> you should be familiar with the concept of trend following, the technique of riding an existing trend in the expectation that it persists. It is time to see the contrarian patterns that signal a reversal or at least a correction in the initial move. Therefore, contrarian patterns suggest a strategy of fading the trend as opposed to riding it.</p>
<p>The chapter covers the classic contrarian patterns. Remember that by <em>classic</em>, I mean the patterns that are already known and established in the world of technical analysis. The purpose of this chapter is to create the contrarian patterns’ objective conditions and back-test them so that you can form an opinion about their frequency and predictability.</p>
<section data-pdf-bookmark="The Doji Pattern" data-type="sect1"><div class="sect1" id="idm46762866808128">
<h1>The Doji Pattern</h1>
<p>Whenever someone<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_contra_doji_ch6"/><a contenteditable="false" data-primary="Doji pattern" data-type="indexterm" id="ix_doji_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_class_contra_doji_ch6"/><a contenteditable="false" data-primary="indecision pattern, Doji as" data-type="indexterm" id="idm46762865559536"/> mentions candlestick patterns, many think about the Doji pattern, as it is the most known and intuitive configuration. The word <em>doji</em> means “mistake” in Japanese, and this is logical as traders label it as an indecision pattern.</p>
<p>Like the Marubozu pattern, the <em>Doji </em> pattern is a one-candle configuration where the open price equals the close price. This is why Doji is an indecision pattern.</p>
<p>To distinguish a bullish Doji from a bearish one, you have to check the previous candlestick as well as the one after it. <a data-type="xref" href="#figure6-1">Figure 6-1</a> shows the theoretical bullish Doji configuration. In a falling market, the apparition of an indecision candle such as the Doji can be a first clue to a change of direction. It must be confirmed by a subsequent bullish candle.</p>
<figure><div class="figure" id="figure6-1"><img alt="" height="348" src="assets/mfpr_0601.png" width="600"/>
<h6><span class="label">Figure 6-1. </span>A bullish Doji</h6>
</div></figure>
<p>In comparison, <a data-type="xref" href="#figure6-2">Figure 6-2</a> shows the theoretical bearish Doji configuration. In a rising market, the apparition of the Doji signals a possible change in the current direction. Similarly, it must be confirmed by a subsequent bearish candle.</p>
<figure><div class="figure" id="figure6-2"><img alt="" height="348" src="assets/mfpr_0602.png" width="600"/>
<h6><span class="label">Figure 6-2. </span>A bearish Doji</h6>
</div></figure>
<p>The rationale<a contenteditable="false" data-primary="power balance" data-type="indexterm" id="idm46762866142208"/> behind the Doji pattern lies within the concept of power balance. When there are more buyers than sellers, the balance of power  is tilted upward as demand is greater than supply; thus, the market rises.</p>
<p>When demand<a contenteditable="false" data-primary="equilibrium, Doji pattern" data-type="indexterm" id="idm46762865990176"/> starts losing momentum and approaches the supply level, an equilibrium occurs as evidenced by the loss of momentum in shaping new highs. An <em>equilibrium </em>occurs when a Doji pattern appears as a close price that equals an open price, showing that neither party has successfully pushed the price toward its desired direction.</p>
<p>In contrast, when supply is increasing relative to demand, the market should start dropping. The Doji pattern shapes the equilibrium point where the market switches from bullish to an expected bearish regime.</p>
<p>It is interesting to consider that there are other types of Doji patterns such as the <span class="keep-together">following</span>.</p>
<section class="pagebreak-before" data-pdf-bookmark="The Dragonfly Doji" data-type="sect2"><div class="sect2" id="idm46762865986560">
<h2 class="less_space">The Dragonfly Doji</h2>
<p>This type<a contenteditable="false" data-primary="Dragonfly Doji pattern" data-type="indexterm" id="idm46762865721952"/><a contenteditable="false" data-primary="Doji pattern" data-secondary="Dragonfly Doji pattern" data-type="indexterm" id="idm46762865720816"/> of Doji has its high price equal to the close and open price. This means that it is a Doji where only the low price is different from the others. It is also an indecision pattern that can be either bullish or bearish depending on the prior price action. The issue with this pattern is that you can think of it in two ways: either the market has not made a higher high, thus failing to continue higher and giving a bearish bias, or the market failed to close lower and went back up to square one, giving a bullish bias. In any case, it must be treated as all Doji patterns are treated: as a reversal <span class="keep-together">pattern</span>.</p>
<p><a data-type="xref" href="#figure6-3">Figure 6-3</a> illustrates a Dragonfly Doji.</p>
<figure><div class="figure" id="figure6-3"><img alt="" height="212" src="assets/mfpr_0603.png" width="147"/>
<h6><span class="label">Figure 6-3. </span>A Dragonfly Doji</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Gravestone Doji" data-type="sect2"><div class="sect2" id="idm46762866495744">
<h2>The Gravestone Doji</h2>
<p>This is the opposite<a contenteditable="false" data-primary="Doji pattern" data-secondary="Gravestone Doji pattern" data-type="indexterm" id="idm46762866494384"/><a contenteditable="false" data-primary="Gravestone Doji pattern" data-type="indexterm" id="idm46762866492976"/> of the Dragonfly Doji. It follows the same intuition and has the same expectation, which depends on the previous price action. In the case of a falling market, if you encounter a Gravestone Doji, then you must have a bullish bias. Similarly, if you have a rising market and you encounter a Gravestone Doji, then you must have a bearish bias.</p>
<p><a data-type="xref" href="#figure6-4">Figure 6-4</a> illustrates a Gravestone Doji.</p>
<figure><div class="figure" id="figure6-4"><img alt="" height="212" src="assets/mfpr_0604.png" width="147"/>
<h6><span class="label">Figure 6-4. </span>A Gravestone Doji</h6>
</div></figure>
</div></section>
<section class="pagebreak-before" data-pdf-bookmark="The Flat Doji" data-type="sect2"><div class="sect2" id="idm46762865668768">
<h2 class="less_space">The Flat Doji</h2>
<p>This type<a contenteditable="false" data-primary="Doji pattern" data-secondary="Flat Doji pattern" data-type="indexterm" id="idm46762865666688"/><a contenteditable="false" data-primary="Flat Doji pattern" data-type="indexterm" id="idm46762865624016"/> of pattern occurs generally when the retail markets are closed or when the market is trading close to the holidays. Low liquidity and volume are the main characteristics of the Flat Doji, and it is unlikely to indicate a directional. It remains however, a type of market indecision where the four prices equal each other. This is why it looks like a horizontal line.</p>
<p><a data-type="xref" href="#figure6-5">Figure 6-5</a> illustrates a Flat Doji.</p>
<figure><div class="figure" id="figure6-5"><img alt="" height="9" src="assets/mfpr_0605.png" width="273"/>
<h6><span class="label">Figure 6-5. </span>A Flat Doji</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Double Doji" data-type="sect2"><div class="sect2" id="idm46762865619552">
<h2>The Double Doji</h2>
<p>Indecision<a contenteditable="false" data-primary="Doji pattern" data-secondary="Double Doji pattern" data-type="indexterm" id="idm46762865677248"/><a contenteditable="false" data-primary="Double Doji pattern" data-type="indexterm" id="idm46762865675840"/> can last for more than one period. It is possible that you might see more than one successive Doji pattern. Two successive Doji patterns signify prolonged indecision, and it is possible that the reversal’s conviction is lowered as the contrarian traders are still hesitating and struggling to force the market their way. Generally, two Doji patterns are not worth more than one Doji.</p>
<p><a data-type="xref" href="#figure6-6">Figure 6-6</a> illustrates a Double Doji.</p>
<figure><div class="figure" id="figure6-6"><img alt="" height="166" src="assets/mfpr_0606.png" width="378"/>
<h6><span class="label">Figure 6-6. </span>A Double Doji</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Tri Star Doji" data-type="sect2"><div class="sect2" id="idm46762866534608">
<h2>The Tri Star Doji</h2>
<p>This might<a contenteditable="false" data-primary="Doji pattern" data-secondary="Tri Star Doji pattern" data-type="indexterm" id="idm46762866532848"/><a contenteditable="false" data-primary="Tri Star Doji pattern" data-type="indexterm" id="idm46762866531440"/> be the rarest Doji pattern out of all the others. It is characterized by having three Doji patterns where the one in the middle gaps over the other two.</p>
<p><a data-type="xref" href="#figure6-7">Figure 6-7</a> illustrates a Tri Star Doji.</p>
<figure><div class="figure" id="figure6-7"><img alt="" height="326" src="assets/mfpr_0607.png" width="590"/>
<h6><span class="label">Figure 6-7. </span>A Tri Star Doji</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>A Doji pattern<a contenteditable="false" data-primary="equilibrium, Doji pattern" data-type="indexterm" id="idm46762866061232"/> is not perfect as it may occur multiple times with no market reaction afterward. That’s because an equilibrium between the open price and the close price does not necessarily mean an equilibrium in the expected buying and selling activity.</p>
</div>
<p>Algorithmically<a contenteditable="false" data-primary="rounding numbers" data-secondary="Doji pattern" data-type="indexterm" id="idm46762866059360"/>, the conditions are not hard. You need to round the values as shown previously and then follow this intuition:</p>
<ul>
<li>If the current close price is greater than the current open price, the previous close price equals the open price, and the prior close price is lower than the prior open price, then print 1 in the next row.</li>
<li>If the current close price is lower than the current open price, the previous close price equals the open price, and the prior close price is greater than the prior open price, then print −1 in the next row.</li>
</ul>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>I have previously mentioned that the Doji pattern is a one-candle configuration. This is true because the Doji is the candle that has the same open and close prices. However, to confirm the pattern so that the algorithm predicts the next likely direction, you must impose the conditions previously mentioned.</p>
</div>
<p>You can code the signal function for the Doji pattern through the following code snippet:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-8">Figure 6-8</a> shows a signal chart on USDCHF.</p>
<figure><div class="figure" id="figure6-8"><img alt="" height="432" src="assets/mfpr_0608.png" width="600"/>
<h6><span class="label">Figure 6-8. </span>Signal chart on USDCHF</h6>
</div></figure>
<p>Obviously, the Doji pattern is not uncommon. <a data-type="xref" href="#figure6-9">Figure 6-9</a> shows another signal chart on the FTSE 100.</p>
<figure><div class="figure" id="figure6-9"><img alt="" height="434" src="assets/mfpr_0609.png" width="600"/>
<h6><span class="label">Figure 6-9. </span>Signal chart on the FTSE 100</h6>
</div></figure>
<p><a data-type="xref" href="#table6-1">Table 6-1</a> shows the performance summary of the Doji pattern. Before checking the results, let’s recap the trading conditions mentioned previously:</p>
<ul>
<li>The entry is done on the next open price after the validation of the signal on the current close price.</li>
<li>The exit is done upon getting another signal in either direction (bullish or <span class="keep-together">bearish</span>).</li>
<li>The transaction costs are omitted from the performance evaluation metrics.</li>
<li>There is no risk management system.</li>
</ul>
<table id="table6-1">
<caption><span class="label">Table 6-1. </span>Doji pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>45.86%</td>
<td>0.97</td>
<td>1.14</td>
<td>1537</td>
</tr>
<tr>
<td>USDCHF</td>
<td>45.33%</td>
<td>0.83</td>
<td>1.00</td>
<td>1661</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>49.78%</td>
<td>1.03</td>
<td>1.04</td>
<td>1177</td>
</tr>
<tr>
<td>USDCAD</td>
<td>48.06%</td>
<td>0.92</td>
<td>1.00</td>
<td>1315</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>48.69%</td>
<td>0.93</td>
<td>0.98</td>
<td>345</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>45.69%</td>
<td>0.91</td>
<td>1.09</td>
<td>1254</td>
</tr>
<tr>
<td>GOLD</td>
<td>46.17%</td>
<td>1.05</td>
<td>1.22</td>
<td>3166</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>48.84%</td>
<td>1.11</td>
<td>1.16</td>
<td>303</td>
</tr>
<tr>
<td>FTSE100</td>
<td>50.27%</td>
<td>1.02</td>
<td>1.00</td>
<td>179</td>
</tr>
</tbody>
</table>
<p>The back-tested assets show that the Doji pattern is a common configuration but generally not that predictive in nature. In my experience, it is essential to define the current market regime before relying on a Doji pattern for a future reaction. For example, in a bullish trending market, the bearish Doji pattern is unlikely to provide a signal of quality, but in a sideways market, the efficacy increases (remember the invisible hand).</p>
<p>To summarize, the Doji pattern is ground zero of technical pattern recognition due to the simplicity and abundance of the configuration but is far from being the most predictive pattern<a contenteditable="false" data-primary="" data-startref="ix_doji_patt_ch6" data-type="indexterm" id="idm46762865436960"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_doji_ch6" data-type="indexterm" id="idm46762865435696"/><a contenteditable="false" data-primary="" data-startref="ix_contra_doji_ch6" data-type="indexterm" id="idm46762865434352"/>.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="The Harami Pattern" data-type="sect1"><div class="sect1" id="idm46762866533888">
<h1>The Harami Pattern</h1>
<p>Synonymous<a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Harami pattern" data-type="indexterm" id="ix_class_contra_harami_ch6"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Harami pattern" data-type="indexterm" id="ix_contra_harami_ch6"/><a contenteditable="false" data-primary="Harami pattern" data-type="indexterm" id="ix_harami_patt_ch6"/> with the old word for <em>pregnant</em> in Japanese, the <em>Harami </em>pattern is a classic contrarian two-candle configuration where the body of the second candle is englobed by the body of the first candle. There are generally two types of Harami patterns, the strict one and the flexible one, and I discuss both in this chapter. Let’s start with the flexible version.</p>
<p>The bullish<a contenteditable="false" data-primary="flexible Harami pattern" data-type="indexterm" id="ix_flex_harami"/> Harami shows a first bearish candle (the mother) followed by a second bullish candle (the baby), which has its close price lower than the open price of the first candle and its open price higher than the close price of the first candle. The highs and lows of both candles are not relevant in the flexible version and are discussed in the strict version instead. <a data-type="xref" href="#figure6-10">Figure 6-10</a> illustrates a flexible bullish Harami.</p>
<figure><div class="figure" id="figure6-10"><img alt="" height="469" src="assets/mfpr_0610.png" width="432"/>
<h6><span class="label">Figure 6-10. </span>A bullish flexible Harami</h6>
</div></figure>
<p>The bearish Harami shows a first bullish candle (the mother) followed by a second bearish candle (the baby), which has its open price lower than the close price of the first candle and its close price higher than the open price of the first candle. <a data-type="xref" href="#figure6-11">Figure 6-11</a> illustrates a flexible bearish Harami.</p>
<figure><div class="figure" id="figure6-11"><img alt="" height="469" src="assets/mfpr_0611.png" width="432"/>
<h6><span class="label">Figure 6-11. </span>A bearish flexible Harami</h6>
</div></figure>
<p>The psychological explanation for the Harami pattern is that the decreasing candle size signals hesitation in the initial trend and that a reversal may be imminent. Generally, with classic patterns, there<a contenteditable="false" data-primary="self-fulfilling prophecy" data-type="indexterm" id="idm46762866229584"/> may be an aspect of self-fulfilling prophecy where a certain percentage of the predictability is due to the reputation of the pattern as opposed to its intuitive explanation.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Some<a contenteditable="false" data-primary="intuition of a pattern" data-type="indexterm" id="idm46762865486400"/> patterns may not have a valid intuition but are nevertheless monitored by professional traders. This is because many other traders also monitor them, creating an infinite spiral that may increase their predictability.</p>
</div>
<p>Algorithmically, the conditions should follow this intuition:</p>
<ul>
<li>If the current close price is greater than the current open price and the previous close price, and the current open price is greater than the previous close price but lower than the previous open price, then print 1 in the next buy row.</li>
<li>If the current close price is lower than the current open price and the previous close price, and the current open price is lower than the previous close price but greater than the previous open price, then print −1 in the next sell row.</li>
</ul>
<p class="pagebreak-before">The signal function for the flexible Harami pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><code>      </code><strong><code>     </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-12">Figure 6-12</a> shows a signal chart on ETHUSD where a bullish Harami appears in a minor bearish correction within an overall bullish trend.</p>
<figure><div class="figure" id="figure6-12"><img alt="" height="434" src="assets/mfpr_0612.png" width="600"/>
<h6><span class="label">Figure 6-12. </span>Signal chart on ETHUSD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-2">Table 6-2</a> summarizes the performance of the flexible Harami pattern<a contenteditable="false" data-primary="" data-startref="ix_flex_harami" data-type="indexterm" id="idm46762864862064"/>.</p>
<table id="table6-2">
<caption><span class="label">Table 6-2. </span>Flexible Harami pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>50.06%</td>
<td>1.15</td>
<td>1.15</td>
<td>759</td>
</tr>
<tr>
<td>USDCHF</td>
<td>53.14%</td>
<td>1.12</td>
<td>0.99</td>
<td>668</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>49.81%</td>
<td>1.06</td>
<td>1.06</td>
<td>823</td>
</tr>
<tr>
<td>USDCAD</td>
<td>52.15%</td>
<td>1.06</td>
<td>0.97</td>
<td>696</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>48.19%</td>
<td>0.96</td>
<td>1.04</td>
<td>554</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>48.81%</td>
<td>0.63</td>
<td>0.66</td>
<td>379</td>
</tr>
<tr>
<td>GOLD</td>
<td>48.73%</td>
<td>0.77</td>
<td>0.82</td>
<td>870</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>53.75%</td>
<td>1.12</td>
<td>0.96</td>
<td>80</td>
</tr>
<tr>
<td>FTSE100</td>
<td>57.44%</td>
<td>1.42</td>
<td>1.05</td>
<td>94</td>
</tr>
</tbody>
</table>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-13">Figure 6-13</a> shows a signal chart on GBPUSD with a bearish Harami appearing before a local top.</p>
<figure><div class="figure" id="figure6-13"><img alt="" height="428" src="assets/mfpr_0613.png" width="600"/>
<h6><span class="label">Figure 6-13. </span>Signal chart on GBPUSD</h6>
</div></figure>
<p>Let’s now<a contenteditable="false" data-primary="strict Harami pattern" data-type="indexterm" id="ix_strict_harami"/> move on to the strict Harami pattern. The bullish Harami shows a first bearish candle (the mother) followed by a second bullish candle (the baby), whose high price is lower than the open price of the first candle and whose low price is higher than the close price of the first candle. <a data-type="xref" href="#figure6-14">Figure 6-14</a> illustrates a bullish strict Harami.</p>
<figure><div class="figure" id="figure6-14"><img alt="" height="469" src="assets/mfpr_0614.png" width="432"/>
<h6><span class="label">Figure 6-14. </span>A bullish strict Harami</h6>
</div></figure>
<p class="pagebreak-before">The bearish Harami shows a first bullish candle (the mother) followed by a second bearish candle (the baby), whose high price is lower than the close price of the first candle and whose low price is higher than the open price of the first candle. <a data-type="xref" href="#figure6-15">Figure 6-15</a> illustrates a bearish strict Harami.</p>
<figure><div class="figure" id="figure6-15"><img alt="" height="469" src="assets/mfpr_0615.png" width="432"/>
<h6><span class="label">Figure 6-15. </span>A bearish strict Harami</h6>
</div></figure>
<p>Algorithmically, the conditions should follow the following intuition:</p>
<ul>
<li>If the current candlestick is bullish and fully englobed within the previous bearish one, then print 1 in the next buy row.</li>
<li>If the current candlestick is bearish and fully englobed within the previous bullish one, then print −1 in the next sell row.</li>
</ul>
<p>The signal function for the strict Harami pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code> </code><strong><code>          </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p>Because of the rarity of the strict Harami pattern, a back-test is not very informative. Data analysis requires a lot of output; therefore, a few signals are unlikely to lead to any robust conclusion. In practice, you should not commonly see the strict Harami as opposed to the flexible one<a contenteditable="false" data-primary="" data-startref="ix_strict_harami" data-type="indexterm" id="idm46762864880576"/>.</p>
<p>To summarize, the Harami pattern is a two-candle configuration that can have two variations: flexible and strict. The former version is the most commonly used as it has enough data to evaluate it, while the latter suffers from extreme rarity due to the strenuous conditions imposed<a contenteditable="false" data-primary="" data-startref="ix_class_contra_harami_ch6" data-type="indexterm" id="idm46762864878416"/><a contenteditable="false" data-primary="" data-startref="ix_harami_patt_ch6" data-type="indexterm" id="idm46762864877024"/><a contenteditable="false" data-primary="" data-startref="ix_contra_harami_ch6" data-type="indexterm" id="idm46762864387296"/>.</p>
</div></section>
<section data-pdf-bookmark="The On Neck Pattern" data-type="sect1"><div class="sect1" id="idm46762865745424">
<h1>The On Neck Pattern</h1>
<p>The <em>On Neck</em> pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="On Neck pattern" data-type="indexterm" id="ix_contra_on_neck"/><a contenteditable="false" data-primary="On Neck pattern" data-type="indexterm" id="ix_on_neck_patt"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="On Neck pattern" data-type="indexterm" id="ix_class_contra_on_neck"/> is a two-candle configuration that is easy to understand. The bullish On Neck is composed of a first bearish candlestick and a second bullish candlestick, which opens at a gap lower but closes exactly at the close price of the first candlestick. <a data-type="xref" href="#figure6-16">Figure 6-16</a> illustrates a bullish On Neck pattern.</p>
<figure><div class="figure" id="figure6-16"><img alt="" height="632" src="assets/mfpr_0616.png" width="496"/>
<h6><span class="label">Figure 6-16. </span>A bullish On Neck</h6>
</div></figure>
<p>The bearish On Neck is composed of a first bullish candlestick and a second bearish candlestick that opens at a gap higher but closes exactly at the close price of the first candlestick. <a data-type="xref" href="#figure6-17">Figure 6-17</a> shows a bearish On Neck pattern. </p>
<figure><div class="figure" id="figure6-17"><img alt="" height="632" src="assets/mfpr_0617.png" width="496"/>
<h6><span class="label">Figure 6-17. </span>A bearish On Neck</h6>
</div></figure>
<p>Naturally, with such conditions, you need to round the values as I have previously shown you. This is to increase the signal frequency without forgoing any condition.</p>
<p>The psychological intuition of the bullish On Neck pattern comes from the fact that even though sellers were in charge, the gap lower failed to push the market price further down, and the buyers have managed to close at the previous close, thus taking control. The bearish On Neck pattern has the same intuition but in the opposite direction, where buyers were initially in charge before sellers managed to fill the gap lower and signal their presence.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name On Neck comes from the fact that the second candlestick looks like it is grabbing on the neck of the first candlestick.</p>
</div>
<p class="pagebreak-before">Algorithmically, the conditions should follow these steps:</p>
<ul>
<li>If the current close price is greater than the current open price and is equal to the previous close price, and the current open price is lower than the previous close price, then print 1 in the next buy row.</li>
<li>If the current close price is lower than the current open price and is equal to the previous close price, and the current open price is greater than the previous close price, then print −1 in the next sell row.</li>
</ul>
<p>The signal function for the On Neck pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>  </code><strong><code>         </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-18">Figure 6-18</a> shows a signal chart on EURUSD.</p>
<figure><div class="figure" id="figure6-18"><img alt="" height="432" src="assets/mfpr_0618.png" width="600"/>
<h6><span class="label">Figure 6-18. </span>Signal chart on EURUSD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-3">Table 6-3</a> summarizes the performance of the pattern.</p>
<table id="table6-3">
<caption><span class="label">Table 6-3. </span>On Neck pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>51.30%</td>
<td>1.14</td>
<td>1.08</td>
<td>191</td>
</tr>
<tr>
<td>USDCHF</td>
<td>46.36%</td>
<td>0.88</td>
<td>1.02</td>
<td>220</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>54.63%</td>
<td>1.28</td>
<td>1.06</td>
<td>194</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.84%</td>
<td>1.00</td>
<td>0.97</td>
<td>177</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>44.04%</td>
<td>0.42</td>
<td>0.53</td>
<td>84</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>41.41%</td>
<td>0.56</td>
<td>0.79</td>
<td>99</td>
</tr>
<tr>
<td>GOLD</td>
<td>51.56%</td>
<td>1.27</td>
<td>1.19</td>
<td>128</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>36.11%</td>
<td>0.35</td>
<td>0.61</td>
<td>36</td>
</tr>
<tr>
<td>FTSE100</td>
<td>57.50%</td>
<td>0.79</td>
<td>0.58</td>
<td>40</td>
</tr>
</tbody>
</table>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-19">Figure 6-19</a> shows a signal chart on gold.</p>
<figure><div class="figure" id="figure6-19"><img alt="" height="434" src="assets/mfpr_0619.png" width="600"/>
<h6><span class="label">Figure 6-19. </span>Signal chart on gold</h6>
</div></figure>
<p>To summarize, the On Neck pattern shows mixed results between the markets. Furthermore, it can be quite uncommon<a contenteditable="false" data-primary="" data-startref="ix_on_neck_patt" data-type="indexterm" id="idm46762864476672"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_on_neck" data-type="indexterm" id="idm46762864475296"/><a contenteditable="false" data-primary="" data-startref="ix_contra_on_neck" data-type="indexterm" id="idm46762864473920"/>.</p>
</div></section>
<section data-pdf-bookmark="The Tweezers Pattern" data-type="sect1"><div class="sect1" id="idm46762864385200">
<h1>The Tweezers Pattern</h1>
<p>The <em>Tweezers </em>pattern<a contenteditable="false" data-primary="Tweezers pattern" data-type="indexterm" id="ix_tweezer_patt_ch6"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Tweezers pattern" data-type="indexterm" id="ix_contra_tweezer_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Tweezers pattern" data-type="indexterm" id="ix_class_contra_tweezer_ch6"/> is a two-candle contrarian configuration. It is one of the simplest and most straightforward contrarian patterns. The bullish Tweezers pattern is composed of a first bearish candlestick and a second bullish candlestick that shares the same low as the first candlestick. <a data-type="xref" href="#figure6-20">Figure 6-20</a> illustrates a bullish Tweezers pattern.</p>
<figure><div class="figure" id="figure6-20"><img alt="" height="484" src="assets/mfpr_0620.png" width="600"/>
<h6><span class="label">Figure 6-20. </span>A bullish Tweezers</h6>
</div></figure>
<p>The bearish Tweezers pattern is composed of a first bullish candlestick and a second bearish candlestick that shares the same high as the first candlestick. <a data-type="xref" href="#figure6-21">Figure 6-21</a> illustrates a bearish Tweezers pattern.</p>
<figure><div class="figure" id="figure6-21"><img alt="" height="484" src="assets/mfpr_0621.png" width="600"/>
<h6><span class="label">Figure 6-21. </span>A bearish Tweezers</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The pattern is called <em>Tweezers </em>since the equality condition resembles a pair of tweezers. Arguably, this is a far-fetched way of naming the pattern.</p>
</div>
<p>The psychological intuition of the bullish Tweezers pattern comes from the fact that by failing to shape a new low, the market may have found support. The bearish Tweezers pattern comes from the fact that by failing to shape a new high, the market may have found resistance.</p>
<p class="pagebreak-before">Algorithmically, the conditions should follow this intuition:</p>
<ul>
<li>If the current low price of a bullish candlestick equals the previous low price of a bearish candle, then print 1 in the next buy row.</li>
<li>If the current high price of a bearish candlestick equals the previous high price of a bullish candle, then print −1 in the next sell row.</li>
</ul>
<p>The signal function for the Tweezers pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code>
</code><code>              </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code>\
</code><code>              </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>    </code><strong><code>       </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code>\
</code><code>                </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-22">Figure 6-22</a> shows a signal chart on gold. You can see that sometimes there can be many Tweezers around the same area.</p>
<figure><div class="figure" id="figure6-22"><img alt="" height="434" src="assets/mfpr_0622.png" width="600"/>
<h6><span class="label">Figure 6-22. </span>Signal chart on gold</h6>
</div></figure>
<p><a data-type="xref" href="#table6-4">Table 6-4</a> summarizes the performance of the pattern.</p>
<table id="table6-4">
<caption><span class="label">Table 6-4. </span>Tweezers pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>50.77%</td>
<td>1.20</td>
<td>1.17</td>
<td>1028</td>
</tr>
<tr>
<td>USDCHF</td>
<td>48.27%</td>
<td>1.12</td>
<td>1.20</td>
<td>1104</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>49.32%</td>
<td>0.89</td>
<td>0.91</td>
<td>667</td>
</tr>
<tr>
<td>USDCAD</td>
<td>49.71%</td>
<td>0.87</td>
<td>0.88</td>
<td>883</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>46.61%</td>
<td>1.17</td>
<td>1.35</td>
<td>354</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>50.16%</td>
<td>0.82</td>
<td>0.81</td>
<td>911</td>
</tr>
<tr>
<td>GOLD</td>
<td>50.57%</td>
<td>1.03</td>
<td>1.01</td>
<td>1038</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>48.61%</td>
<td>0.96</td>
<td>1.01</td>
<td>253</td>
</tr>
<tr>
<td>FTSE100</td>
<td>49.04%</td>
<td>1.09</td>
<td>1.14</td>
<td>157</td>
</tr>
</tbody>
</table>
<p>To summarize, the Tweezers pattern is a simple configuration with slightly negative to mixed results<a contenteditable="false" data-primary="" data-startref="ix_tweezer_patt_ch6" data-type="indexterm" id="idm46762863657456"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_tweezer_ch6" data-type="indexterm" id="idm46762863656048"/><a contenteditable="false" data-primary="" data-startref="ix_contra_tweezer_ch6" data-type="indexterm" id="idm46762863654704"/>.</p>
<p><a data-type="xref" href="#figure6-23">Figure 6-23</a> shows a signal chart on the FTSE 100, where a Tweezers pattern can be seen on the bottom.</p>
<figure><div class="figure" id="figure6-23"><img alt="" height="434" src="assets/mfpr_0623.png" width="600"/>
<h6><span class="label">Figure 6-23. </span>Signal chart on the FTSE 100</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Stick Sandwich Pattern" data-type="sect1"><div class="sect1" id="idm46762865005776">
<h1>The Stick Sandwich Pattern</h1>
<p>The <em>Stick Sandwich</em> pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Stick Sandwich pattern" data-type="indexterm" id="ix_contra_sandwich_ch6"/><a contenteditable="false" data-primary="Stick Sandwich pattern" data-type="indexterm" id="ix_stick_sandw_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Stick Sandwich pattern" data-type="indexterm" id="ix_class_contra_sandwich_ch6"/> is a three-candle contrarian configuration composed of candlesticks that alternate in color. The bullish Stick Sandwich is composed of a first bearish candlestick followed by a smaller bullish candlestick and a bearish candlestick bigger than the second candlestick. <a data-type="xref" href="#figure6-24">Figure 6-24</a> illustrates a bullish Stick Sandwich pattern.</p>
<figure><div class="figure" id="figure6-24"><img alt="" height="292" src="assets/mfpr_0624.png" width="600"/>
<h6><span class="label">Figure 6-24. </span>A bullish Stick Sandwich</h6>
</div></figure>
<p>The bearish Stick Sandwich is composed of a first bullish candlestick followed by a smaller bearish candlestick and a bullish candlestick bigger than the second candlestick. <a data-type="xref" href="#figure6-25">Figure 6-25</a> illustrates a bearish Stick Sandwich pattern.</p>
<figure><div class="figure" id="figure6-25"><img alt="" height="292" src="assets/mfpr_0625.png" width="600"/>
<h6><span class="label">Figure 6-25. </span>A bearish Stick Sandwich</h6>
</div></figure>
<p>Generally, the Stick Sandwich pattern appears in a trend; hence, the bullish Stick Sandwich is preceded by a bearish price action, and the bearish Stick Sandwich is preceded by a bullish price action.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Stick Sandwich pattern comes from the fact that it looks like it is a sandwich, with the big outside candlesticks representing bread and the middle candlestick representing the filling.</p>
</div>
<p>The psychological intuition of the bullish Stick Sandwich comes from the fact that by failing to shape new lows, the market may have found support (similar to the Tweezers intuition). The bearish Stick Sandwich pattern comes from the fact that by failing to shape new highs, the market may have found resistance.</p>
<p>The signal function for the Stick Sandwich is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-26">Figure 6-26</a> shows a signal chart on GBPUSD.</p>
<figure><div class="figure" id="figure6-26"><img alt="" height="428" src="assets/mfpr_0626.png" width="600"/>
<h6><span class="label">Figure 6-26. </span>Signal chart on GBPUSD</h6>
</div></figure>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-27">Figure 6-27</a> shows a signal chart on USDCAD.</p>
<figure><div class="figure" id="figure6-27"><img alt="" height="433" src="assets/mfpr_0627.png" width="600"/>
<h6><span class="label">Figure 6-27. </span>Signal chart on USDCAD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-5">Table 6-5</a> summarizes the performance of the pattern.</p>
<table id="table6-5">
<caption><span class="label">Table 6-5. </span>Stick Sandwich pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>44.26%</td>
<td>0.73</td>
<td>0.92</td>
<td>253</td>
</tr>
<tr>
<td>USDCHF</td>
<td>47.53%</td>
<td>1.00</td>
<td>1.10</td>
<td>284</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>49.37%</td>
<td>0.97</td>
<td>0.99</td>
<td>318</td>
</tr>
<tr>
<td>USDCAD</td>
<td>49.12%</td>
<td>1.01</td>
<td>1.05</td>
<td>285</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>51.12%</td>
<td>1.88</td>
<td>1.80</td>
<td>178</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>50.37%</td>
<td>1.56</td>
<td>1.54</td>
<td>135</td>
</tr>
<tr>
<td>GOLD</td>
<td>50.99%</td>
<td>0.96</td>
<td>0.92</td>
<td>251</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>56.86%</td>
<td>1.19</td>
<td>0.90</td>
<td>51</td>
</tr>
<tr>
<td>FTSE100</td>
<td>53.84%</td>
<td>2.62</td>
<td>2.24</td>
<td>39</td>
</tr>
</tbody>
</table>
<p>To summarize, the Stick Sandwich pattern slightly outperforms the other patterns shown so far in this chapter. This makes it an interesting candidate to combine with technical indicators and other exit techniques<a contenteditable="false" data-primary="" data-startref="ix_stick_sandw_patt_ch6" data-type="indexterm" id="idm46762862657968"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_sandwich_ch6" data-type="indexterm" id="idm46762862656704"/><a contenteditable="false" data-primary="" data-startref="ix_contra_sandwich_ch6" data-type="indexterm" id="idm46762862331360"/>.</p>
</div></section>
<section data-pdf-bookmark="The Hammer Pattern" data-type="sect1"><div class="sect1" id="idm46762862329600">
<h1>The Hammer Pattern</h1>
<p>Technically, the <em>Hammer</em> pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Hammer pattern" data-type="indexterm" id="ix_contra_hammer_ch6"/><a contenteditable="false" data-primary="Hammer pattern" data-type="indexterm" id="ix_hammer_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Hammer pattern" data-type="indexterm" id="ix_class_contra_hammer_ch6"/> is just one name for four different (but similar) candlestick figures known as the Shooting Star, the Hanging Man, the Hammer, and the Inverted Hammer. In my experience, only the Hammer and the Inverted Hammer are worth pursuing since they have a valid intuition discussed later in this section.</p>
<p>The bullish Hammer is a bullish candlestick with a long low wick and no high wick. In addition, it must have a relatively small body. <a data-type="xref" href="#figure6-28">Figure 6-28</a> illustrates a bullish <span class="keep-together">Hammer</span>.</p>
<figure><div class="figure" id="figure6-28"><img alt="" height="381" src="assets/mfpr_0628.png" width="600"/>
<h6><span class="label">Figure 6-28. </span>A bullish Hammer</h6>
</div></figure>
<p>The bearish Hammer is a bearish candlestick with a long high wick and no low wick. In addition, it must have a relatively small body. <a data-type="xref" href="#figure6-29">Figure 6-29</a> illustrates a bearish Hammer.</p>
<figure><div class="figure" id="figure6-29"><img alt="" height="381" src="assets/mfpr_0629.png" width="600"/>
<h6><span class="label">Figure 6-29. </span>A bearish Hammer</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Hammer pattern comes from the fact that the long wick looks like a hammer handle while the body of the candle looks like a hammer head.</p>
</div>
<p>The intuition behind the bullish Hammer is that after shaping extreme lows during the hour (or the candlestick’s time period), the buyers have managed to close higher than the open price. In contrast, the intuition behind the bearish Hammer is that after shaping extreme highs, the sellers have managed to close lower than the open price, thus becoming in charge.</p>
<p>The signal function for the Hammer pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>            </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code>\
</code><code>               </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="nb">min</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>               </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">2</code><code> </code><code class="o">*</code><code> </code><code class="n">wick</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                   </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                     </code><code>
</code><strong><code>            </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>            </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code>\
</code><code>                 </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="nb">max</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>                 </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">2</code><code> </code><code class="o">*</code><code> </code><code class="n">wick</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                     </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code>                      </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-30">Figure 6-30</a> shows a signal chart on GBPUSD.</p>
<figure><div class="figure" id="figure6-30"><img alt="" height="414" src="assets/mfpr_0630.png" width="600"/>
<h6><span class="label">Figure 6-30. </span>Signal chart on GBPUSD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-6">Table 6-6</a> summarizes the performance of the pattern.</p>
<table id="table6-6">
<caption><span class="label">Table 6-6. </span>Hammer pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>47.82%</td>
<td>1.24</td>
<td>1.36</td>
<td>23</td>
</tr>
<tr>
<td>USDCHF</td>
<td>61.11%</td>
<td>1.93</td>
<td>1.23</td>
<td>36</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>47.61%</td>
<td>0.87</td>
<td>0.96</td>
<td>21</td>
</tr>
<tr>
<td>USDCAD</td>
<td>42.85%</td>
<td>0.7</td>
<td>0.94</td>
<td>28</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>52.63%</td>
<td>2.39</td>
<td>2.14</td>
<td>19</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>60.00%</td>
<td>1.08</td>
<td>0.72</td>
<td>20</td>
</tr>
<tr>
<td>GOLD</td>
<td>47.36%</td>
<td>1.09</td>
<td>1.22</td>
<td>38</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>57.57%</td>
<td>2.22</td>
<td>1.63</td>
<td>33</td>
</tr>
<tr>
<td>FTSE100</td>
<td>55.00%</td>
<td>1.22</td>
<td>0.99</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>To summarize, the Hammer pattern is a simple and intuitive configuration but can be quite rare, which makes its evaluation biased<a contenteditable="false" data-primary="" data-startref="ix_hammer_patt_ch6" data-type="indexterm" id="idm46762862987552"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_hammer_ch6" data-type="indexterm" id="idm46762862986176"/><a contenteditable="false" data-primary="" data-startref="ix_contra_hammer_ch6" data-type="indexterm" id="idm46762862984832"/>.</p>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-31">Figure 6-31</a> shows a signal chart on USDCAD.</p>
<figure><div class="figure" id="figure6-31"><img alt="" height="414" src="assets/mfpr_0631.png" width="600"/>
<h6><span class="label">Figure 6-31. </span>Signal chart on USDCAD</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Star Pattern" data-type="sect1"><div class="sect1" id="idm46762862366912">
<h1>The Star Pattern</h1>
<p>The <em>Star </em>pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Star pattern" data-type="indexterm" id="ix_contra_star_ch6"/><a contenteditable="false" data-primary="Star pattern" data-type="indexterm" id="ix_star_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Star pattern" data-type="indexterm" id="ix_class_contra_star_ch6"/> is a three-candle contrarian configuration that is less common than the other patterns. This is because it contains gaps<a contenteditable="false" data-primary="gaps" data-type="indexterm" id="idm46762862022416"/> combined with color alternation, which makes it unlikely to occur frequently.</p>
<p>The bullish Star pattern, also known as the Morning Star, is composed of a bearish candle followed by a small-bodied candle that gaps below it, before a third bullish candle, which gaps higher than the middle candle. <a data-type="xref" href="#figure6-32">Figure 6-32</a> illustrates a Morning Star pattern.</p>
<figure><div class="figure" id="figure6-32"><img alt="" height="504" src="assets/mfpr_0632.png" width="600"/>
<h6><span class="label">Figure 6-32. </span>A Morning Star</h6>
</div></figure>
<p>The bearish Star pattern, also known as the Evening Star, is composed of a bullish candle followed by a small-bodied candle that gaps over it, before a third bearish candle, which gaps lower than the middle candle. <a data-type="xref" href="#figure6-33">Figure 6-33</a> illustrates an evening Star pattern.</p>
<figure><div class="figure" id="figure6-33"><img alt="" height="504" src="assets/mfpr_0633.png" width="600"/>
<h6><span class="label">Figure 6-33. </span>An Evening Star</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Star pattern comes from the fact that the middle candlestick is isolated, making it look like a distant star.</p>
</div>
<p>The intuition behind the Morning Star is that the market has perfectly shaped a U-turn and demand is now healthier than before due to the shift of balance (confirmed by the third bullish candle). The same intuition applies with regard to the Evening Star.</p>
<p>The signal function for the Star pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><code>       </code><strong><code>     </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="nb">max</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code>\
</code><code>               </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="nb">max</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                   </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                     </code><code>
</code><strong><code>            </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>            </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="nb">min</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code>\
</code><code>                 </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="nb">min</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">,</code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code>\
</code><code>                 </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                     </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code>                      </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-34">Figure 6-34</a> shows a signal chart on the S&amp;P 500.</p>
<figure><div class="figure" id="figure6-34"><img alt="" height="416" src="assets/mfpr_0634.png" width="600"/>
<h6><span class="label">Figure 6-34. </span>Signal chart on the S&amp;P 500</h6>
</div></figure>
<p>The back-tests are omitted due to the rarity of the pattern<a contenteditable="false" data-primary="" data-startref="ix_star_patt_ch6" data-type="indexterm" id="idm46762862275936"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_star_ch6" data-type="indexterm" id="idm46762862274560"/><a contenteditable="false" data-primary="" data-startref="ix_contra_star_ch6" data-type="indexterm" id="idm46762862927232"/>.</p>
</div></section>
<section data-pdf-bookmark="The Piercing Pattern" data-type="sect1"><div class="sect1" id="idm46762862040800">
<h1>The Piercing Pattern</h1>
<p>The <em>Piercing</em> pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Piercing pattern" data-type="indexterm" id="ix_contra_pierce_ch6"/><a contenteditable="false" data-primary="Piercing pattern" data-type="indexterm" id="ix_pierce_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Piercing pattern" data-type="indexterm" id="ix_class_contra_pierce_ch6"/> is one of the most well-known two-candle configurations in the world of technical pattern recognition. The bullish Piercing pattern is composed of a bearish candle followed by a bullish candlestick that opens at a gap lower and closes above the close of the previous candlestick but below its open price. <a data-type="xref" href="#figure6-35">Figure 6-35</a> illustrates a bullish Piercing pattern.</p>
<figure><div class="figure" id="figure6-35"><img alt="" height="452" src="assets/mfpr_0635.png" width="507"/>
<h6><span class="label">Figure 6-35. </span>A bullish Piercing pattern</h6>
</div></figure>
<p>The bearish Piercing pattern is composed of a bullish candle followed by a bearish candlestick that opens at a gap higher and closes below the close of the previous candlestick but above its close price. <a data-type="xref" href="#figure6-36">Figure 6-36</a> illustrates a bullish Piercing pattern.</p>
<figure><div class="figure" id="figure6-36"><img alt="" height="452" src="assets/mfpr_0636.png" width="507"/>
<h6><span class="label">Figure 6-36. </span>A bearish Piercing pattern</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Piercing pattern comes from the fact that the second candle comes from the outside and penetrates the first candle.</p>
</div>
<p>The intuition behind the bullish Piercing pattern is that the previous close is surpassed even though the market has opened with a gap lower. The pattern shows a reluctance to abandon the purchase from the buyers whose buying activities prevented the market from continuing lower. Similarly, with a bearish Piercing pattern, the sellers are refusing to leave the gap unfilled and are taking control.</p>
<p>The signal function for the Piercing pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>    </code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code> </code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-37">Figure 6-37</a> shows a signal chart on gold.</p>
<figure><div class="figure" id="figure6-37"><img alt="" height="436" src="assets/mfpr_0637.png" width="600"/>
<h6><span class="label">Figure 6-37. </span>Signal chart on gold</h6>
</div></figure>
<p><a data-type="xref" href="#figure6-38">Figure 6-38</a> shows a signal chart on the FTSE 100.</p>
<figure><div class="figure" id="figure6-38"><img alt="" height="434" src="assets/mfpr_0638.png" width="600"/>
<h6><span class="label">Figure 6-38. </span>Signal chart on the FTSE 100</h6>
</div></figure>
<p><a data-type="xref" href="#table6-7">Table 6-7</a> summarizes the performance of the pattern.</p>
<table id="table6-7">
<caption><span class="label">Table 6-7. </span>Piercing pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>51.41%</td>
<td>0.95</td>
<td>0.90</td>
<td>1904</td>
</tr>
<tr>
<td>USDCHF</td>
<td>49.26%</td>
<td>0.93</td>
<td>0.95</td>
<td>1961</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>50.83%</td>
<td>0.84</td>
<td>0.81</td>
<td>1985</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.73%</td>
<td>0.93</td>
<td>0.90</td>
<td>1961</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>50.88%</td>
<td>0.87</td>
<td>0.84</td>
<td>1584</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>48.68%</td>
<td>0.91</td>
<td>0.96</td>
<td>1066</td>
</tr>
<tr>
<td>GOLD</td>
<td>51.30%</td>
<td>0.96</td>
<td>0.92</td>
<td>2341</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>49.46%</td>
<td>1.06</td>
<td>1.07</td>
<td>186</td>
</tr>
<tr>
<td>FTSE100</td>
<td>49.49%</td>
<td>0.96</td>
<td>0.98</td>
<td>295</td>
</tr>
</tbody>
</table>
<p>The Piercing pattern can be common, but its profitability is low compared to other patterns<a contenteditable="false" data-primary="" data-startref="ix_pierce_patt_ch6" data-type="indexterm" id="idm46762861254192"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_pierce_ch6" data-type="indexterm" id="idm46762861252816"/><a contenteditable="false" data-primary="" data-startref="ix_contra_pierce_ch6" data-type="indexterm" id="idm46762861251472"/>.</p>
</div></section>
<section data-pdf-bookmark="The Engulfing Pattern" data-type="sect1"><div class="sect1" id="idm46762862155392">
<h1>The Engulfing Pattern</h1>
<p>The <em>Engulfing </em>pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Engulfing pattern" data-type="indexterm" id="ix_contra_engulf_ch6"/><a contenteditable="false" data-primary="Engulfing pattern" data-type="indexterm" id="ix_engulf_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Engulfing pattern" data-type="indexterm" id="ix_class_contra_engulf_ch6"/>, a two-candle contrarian configuration, is the mirror image of the Harami pattern. Interestingly, they are both contrarian in nature. The bullish Engulfing pattern is composed of a first bearish candle and a subsequent bullish candlestick that fully englobes it in a strict way. <a data-type="xref" href="#figure6-39">Figure 6-39</a> illustrates a bullish Engulfing pattern.</p>
<figure><div class="figure" id="figure6-39"><img alt="" height="508" src="assets/mfpr_0639.png" width="507"/>
<h6><span class="label">Figure 6-39. </span>A bullish Engulfing</h6>
</div></figure>
<p>The bearish Engulfing pattern is composed of a first bullish candle and a subsequent bearish candlestick that fully englobes it also in a strict way. <a data-type="xref" href="#figure6-40">Figure 6-40</a> illustrates a bearish Engulfing pattern.</p>
<figure><div class="figure" id="figure6-40"><img alt="" height="508" src="assets/mfpr_0640.png" width="507"/>
<h6><span class="label">Figure 6-40. </span>A bearish Engulfing</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Engulfing pattern comes from the fact that the second candle totally covers (or engulfs) the first candle.</p>
</div>
<p>The intuition behind the Engulfing pattern lies in the total eclipse of the first candle by the second candle. Obviously, when an Engulfing occurs, a change of dynamic presents itself, indicated by the bigger candlestick in the opposite direction.</p>
<p>The signal function for the Engulfing pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><code>  </code><strong><code>         </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-41">Figure 6-41</a> shows a signal chart on EURUSD.</p>
<figure><div class="figure" id="figure6-41"><img alt="" height="414" src="assets/mfpr_0641.png" width="600"/>
<h6><span class="label">Figure 6-41. </span>Signal chart on EURUSD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-8">Table 6-8</a> summarizes the performance of the pattern.</p>
<table id="table6-8">
<caption><span class="label">Table 6-8. </span>Engulfing pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>46.73%</td>
<td>0.94</td>
<td>1.07</td>
<td>1881</td>
</tr>
<tr>
<td>USDCHF</td>
<td>47.46%</td>
<td>0.95</td>
<td>1.05</td>
<td>1890</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>49.87%</td>
<td>1.06</td>
<td>1.06</td>
<td>1989</td>
</tr>
<tr>
<td>USDCAD</td>
<td>48.96%</td>
<td>1.00</td>
<td>1.04</td>
<td>1793</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>47.88%</td>
<td>0.92</td>
<td>1.00</td>
<td>1251</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>47.71%</td>
<td>1.03</td>
<td>1.13</td>
<td>876</td>
</tr>
<tr>
<td>GOLD</td>
<td>47.08%</td>
<td>0.97</td>
<td>1.09</td>
<td>2130</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>50.25%</td>
<td>0.97</td>
<td>0.96</td>
<td>193</td>
</tr>
<tr>
<td>FTSE100</td>
<td>42.49%</td>
<td>0.64</td>
<td>0.87</td>
<td>313</td>
</tr>
</tbody>
</table>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-42">Figure 6-42</a> shows a signal chart on BTCUSD.</p>
<figure><div class="figure" id="figure6-42"><img alt="" height="412" src="assets/mfpr_0642.png" width="600"/>
<h6><span class="label">Figure 6-42. </span>Signal chart on BTCUSD</h6>
</div></figure>
<p>To summarize, the Engulfing pattern resembles the Piercing pattern with regard to predictability. Both patterns may benefit from changed trading conditions such as entries and exits<a contenteditable="false" data-primary="" data-startref="ix_engulf_patt_ch6" data-type="indexterm" id="idm46762861565792"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_engulf_ch6" data-type="indexterm" id="idm46762861564416"/><a contenteditable="false" data-primary="" data-startref="ix_contra_engulf_ch6" data-type="indexterm" id="idm46762861562976"/>.</p>
</div></section>
<section data-pdf-bookmark="The Abandoned Baby Pattern" data-type="sect1"><div class="sect1" id="idm46762861626608">
<h1>The Abandoned Baby Pattern</h1>
<p>This is not really a tradable<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Abandoned Baby pattern" data-type="indexterm" id="ix_contra_aband_baby_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Abandoned Baby pattern" data-type="indexterm" id="ix_class_contra_aband_baby_ch6"/><a contenteditable="false" data-primary="Abandoned Baby pattern" data-type="indexterm" id="ix_aband_baby_ch6"/> pattern because it is extremely rare. I am covering it for educational purposes only as you should not expect to see much of it in practice. The <em>Abandoned Baby </em>is a three-candle configuration where the middle candlestick is a Doji<a contenteditable="false" data-primary="Doji pattern" data-secondary="in Abandoned Baby pattern" data-secondary-sortas="Abandoned Baby pattern" data-type="indexterm" id="idm46762861598752"/>. The bullish Abandoned Baby is composed of a bearish candle followed by a Doji candlestick that gaps lower and has a high that does not touch the low of the first candlestick. Finally, it has a third bullish candlestick, also with a low that does not touch the high of the middle candlestick. <a data-type="xref" href="#figure6-43">Figure 6-43</a> illustrates a bullish Abandoned Baby pattern.</p>
<figure><div class="figure" id="figure6-43"><img alt="" height="553" src="assets/mfpr_0643.png" width="600"/>
<h6><span class="label">Figure 6-43. </span>A bullish Abandoned Baby</h6>
</div></figure>
<p>The bearish Abandoned Baby is composed of a bullish candle followed by a Doji candlestick that gaps higher and has a low that does not touch the high of the first candlestick. Finally, there is a third bearish candlestick, also with a high that does not touch the low of the middle candlestick. <a data-type="xref" href="#figure6-44">Figure 6-44</a> illustrates a bearish Abandoned Baby pattern.</p>
<figure><div class="figure" id="figure6-44"><img alt="" height="553" src="assets/mfpr_0644.png" width="600"/>
<h6><span class="label">Figure 6-44. </span>A bearish Abandoned Baby</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Abandoned Baby pattern comes from the fact that the middle candlestick is completely isolated with its wicks not touching the other two candlesticks’ wicks.</p>
<p>The pattern may be more common for less liquid stocks and other assets. Generally, liquid and major markets rarely see such complex configurations.</p>
</div>
<p>The intuition behind the bullish Abandoned Baby is that the market has shaped a <span class="keep-together">U-turn</span> and demand is now healthier than before due to the shift of balance. The same intuition applies to the bearish Abandoned Baby.  </p>
<p>The signal function for the Abandoned Baby pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>            </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                   </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                     </code><code>
</code><code>         </code><strong><code>   </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>            </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">==</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">:</code><code>
</code><code>                     </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code>                      </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p>I won’t show the performance for this pattern because there is not enough data to make any conclusion.</p>
<p>To summarize, the Abandoned Baby is mostly a theoretical pattern that may look good in books but, in reality, it is so rare that you cannot judge its performance. Also, the few patterns that are detected do not show much predictive potential, rendering the Abandoned Baby a beautiful mythological configuration that underperforms its reputation<a contenteditable="false" data-primary="" data-startref="ix_contra_aband_baby_ch6" data-type="indexterm" id="idm46762860789872"/><a contenteditable="false" data-primary="" data-startref="ix_aband_baby_ch6" data-type="indexterm" id="idm46762860788608"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_aband_baby_ch6" data-type="indexterm" id="idm46762860787232"/>.</p>
</div></section>
<section data-pdf-bookmark="The Spinning Top Pattern" data-type="sect1"><div class="sect1" id="idm46762860967456">
<h1>The Spinning Top Pattern</h1>
<p>The <em>Spinning Top </em>pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Spinning Top pattern" data-type="indexterm" id="ix_contra_spintop_ch6"/><a contenteditable="false" data-primary="Spinning Top pattern" data-type="indexterm" id="ix_spin_top_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Spinning Top pattern" data-type="indexterm" id="ix_class_contra_spintop_ch6"/> is a three-candle contrarian configuration that resembles the Doji pattern but is generally more common and hints indirectly at a rise in volatility<a contenteditable="false" data-primary="volatility" data-secondary="Spinning Top pattern as indicator of" data-type="indexterm" id="idm46762860702912"/>. The bullish Spinning Top is composed of a bearish candle followed by a small-bodied candle with long wicks (highs and lows). Finally, a bullish candle appears to confirm the expected upside move. <a data-type="xref" href="#figure6-45">Figure 6-45</a> illustrates a bullish Spinning Top <span class="keep-together">pattern</span>.</p>
<figure><div class="figure" id="figure6-45"><img alt="" height="421" src="assets/mfpr_0645.png" width="600"/>
<h6><span class="label">Figure 6-45. </span>A bullish Spinning Top</h6>
</div></figure>
<p>The bearish Spinning Top is composed of a bullish candle followed by a small-bodied candle with long wicks (highs and lows). Finally, a bearish candle appears to confirm the expected downside move. <a data-type="xref" href="#figure6-46">Figure 6-46</a> illustrates a bearish Spinning Top pattern.</p>
<figure><div class="figure" id="figure6-46"><img alt="" height="421" src="assets/mfpr_0646.png" width="600"/>
<h6><span class="label">Figure 6-46. </span>A bearish Spinning Top</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The name of the Spinning Top pattern is obviously related to the fact that it resembles a spinning top.</p>
</div>
<p>The intuition behind the Spinning Top pattern is the same as behind the Doji pattern, albeit it is less powerful because the close price does not exactly equal the open price. However, the volatility stemming from the long wicks shows the battle between buyers and sellers and may signal that a clear direction should appear after the pattern.</p>
<p>The signal function for the Spinning Top pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><code>          </code><strong><code>  </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>            </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>               </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code class="o">=</code><code> </code><code class="n">wick</code><code> </code><code>\
</code><code>               </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code class="o">=</code><code> </code><code>\
</code><code>               </code><code class="n">wick</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>               </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code>\
</code><code>               </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code>\
</code><code>               </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>               </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                   </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                     </code><code>
</code><code>  </code><strong><code>          </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>            </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code class="o">=</code><code> </code><code>\
</code><code>                 </code><code class="n">wick</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>                 </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code class="o">=</code><code> </code><code class="n">wick</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code>\
</code><code>                 </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>                 </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                 </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                 </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                     </code><code>
</code><code>                     </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code>                      </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-47">Figure 6-47</a> shows a signal chart on the FTSE 100.</p>
<figure><div class="figure" id="figure6-47"><img alt="" height="416" src="assets/mfpr_0647.png" width="600"/>
<h6><span class="label">Figure 6-47. </span>Signal chart on the FTSE 100</h6>
</div></figure>
<p><a data-type="xref" href="#table6-9">Table 6-9</a> summarizes the performance of the pattern<a contenteditable="false" data-primary="" data-startref="ix_spin_top_patt_ch6" data-type="indexterm" id="idm46762859645504"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_spintop_ch6" data-type="indexterm" id="idm46762859656912"/><a contenteditable="false" data-primary="" data-startref="ix_contra_spintop_ch6" data-type="indexterm" id="idm46762859655504"/>.</p>
<table id="table6-9">
<caption><span class="label">Table 6-9. </span>Spinning Top pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>51.02%</td>
<td>0.87</td>
<td>0.83</td>
<td>243</td>
</tr>
<tr>
<td>USDCHF</td>
<td>49.69%</td>
<td>0.79</td>
<td>0.80</td>
<td>163</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>48.79%</td>
<td>1.14</td>
<td>1.19</td>
<td>414</td>
</tr>
<tr>
<td>USDCAD</td>
<td>45.22%</td>
<td>0.79</td>
<td>0.96</td>
<td>272</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>48.62%</td>
<td>0.77</td>
<td>0.81</td>
<td>401</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>38.37%</td>
<td>0.66</td>
<td>1.06</td>
<td>185</td>
</tr>
<tr>
<td>GOLD</td>
<td>41.22%</td>
<td>0.62</td>
<td>0.88</td>
<td>228</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>50.00%</td>
<td>1.18</td>
<td>1.18</td>
<td>36</td>
</tr>
<tr>
<td>FTSE100</td>
<td>42.34%</td>
<td>0.84</td>
<td>1.14</td>
<td>111</td>
</tr>
</tbody>
</table>
</div></section>
<section class="pagebreak-before" data-pdf-bookmark="The Inside Up/Down Pattern" data-type="sect1"><div class="sect1" id="idm46762860792208">
<h1 class="less_space">The Inside Up/Down Pattern</h1>
<p>The <em>Inside Up/Down</em> pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Inside Up/Down pattern" data-type="indexterm" id="ix_contra_updwn_ch6"/><a contenteditable="false" data-primary="Inside Up/Down pattern" data-type="indexterm" id="ix_inside_updwn_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Inside Up/Down pattern" data-type="indexterm" id="ix_class_contra_updwn_ch6"/> is a three-candle contrarian configuration that signals the end of an initial move using two confirmation candles after an initial candle. The bullish Inside Up pattern is composed of a bearish candle followed by a smaller bullish candle with a body within the body of the first one. Finally, a bullish candlestick must appear and surpass the open of the first candlestick. <a data-type="xref" href="#figure6-48">Figure 6-48</a> illustrates a bullish Inside Up pattern.</p>
<figure><div class="figure" id="figure6-48"><img alt="" height="499" src="assets/mfpr_0648.png" width="600"/>
<h6><span class="label">Figure 6-48. </span>A bullish Inside Up</h6>
</div></figure>
<p>The bearish Inside Down pattern is composed of a bullish candle followed by a smaller bearish candle with a body within the body of the first one. Finally, a bearish candlestick must appear and break the open of the first candlestick. <a data-type="xref" href="#figure6-49">Figure 6-49</a> illustrates a bearish Inside Down pattern.</p>
<figure><div class="figure" id="figure6-49"><img alt="" height="499" src="assets/mfpr_0649.png" width="600"/>
<h6><span class="label">Figure 6-49. </span>A bearish Inside Down</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The body of the candle is the absolute difference between the open and close prices, while the range of the candle is the absolute difference between the high and low prices.</p>
</div>
<p>The intuition behind the Inside Up pattern is that after a prevailing bearish trend, the buyers are taking control. The second candle shows the first balance of power before the third candle confirms this new move by surpassing the close of the second candle. The second candle’s containment within the body of the first one signals that the sellers could not push the price lower—a sign that they are starting to struggle. The intuition behind the Inside Down pattern is that after a prevailing bullish trend, the sellers are taking control. The second candle’s containment within the body of the first one signals that the buyers could not push the price higher.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Notice<a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Harami pattern" data-type="indexterm" id="idm46762860273792"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Harami pattern" data-type="indexterm" id="idm46762860272416"/><a contenteditable="false" data-primary="Harami pattern" data-type="indexterm" id="idm46762860271040"/> that the Inside Up/Down pattern is like a version of a Harami followed by a big candlestick that confirms the new direction.</p>
</div>
<p class="pagebreak-before">The signal function for the Inside Up/Down pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code>\
</code><code>              </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code>\
</code><code>              </code><code class="n">close_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>      </code><strong><code>     </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code class="p">)</code><code> </code><code>\
</code><code>                </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code class="nb">abs</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code>\
</code><code>                </code><code class="n">close_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-50">Figure 6-50</a> shows a signal chart on USDCAD.</p>
<figure><div class="figure" id="figure6-50"><img alt="" height="432" src="assets/mfpr_0650.png" width="600"/>
<h6><span class="label">Figure 6-50. </span>Signal chart on USDCAD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-10">Table 6-10</a> summarizes the performance of the pattern<a contenteditable="false" data-primary="" data-startref="ix_inside_updwn_ch6" data-type="indexterm" id="idm46762858970416"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_updwn_ch6" data-type="indexterm" id="idm46762858949088"/><a contenteditable="false" data-primary="" data-startref="ix_contra_updwn_ch6" data-type="indexterm" id="idm46762858947648"/>.</p>
<table id="table6-10">
<caption><span class="label">Table 6-10. </span>Inside Up/Down pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>49.82%</td>
<td>0.94</td>
<td>0.95</td>
<td>572</td>
</tr>
<tr>
<td>USDCHF</td>
<td>48.89%</td>
<td>0.98</td>
<td>1.02</td>
<td>452</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>48.86%</td>
<td>1.15</td>
<td>1.20</td>
<td>659</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.93%</td>
<td>1.26</td>
<td>1.22</td>
<td>591</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>51.40%</td>
<td>1.30</td>
<td>1.23</td>
<td>214</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>42.22%</td>
<td>0.73</td>
<td>1.00</td>
<td>90</td>
</tr>
<tr>
<td>GOLD</td>
<td>46.73%</td>
<td>0.73</td>
<td>0.83</td>
<td>199</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>50.00%</td>
<td>0.62</td>
<td>0.62</td>
<td>64</td>
</tr>
<tr>
<td>FTSE100</td>
<td>54.13%</td>
<td>1.04</td>
<td>0.88</td>
<td>133</td>
</tr>
</tbody>
</table>
<p class="pagebreak-before"><a data-type="xref" href="#figure6-51">Figure 6-51</a> shows a signal chart on ETHUSD.</p>
<figure><div class="figure" id="figure6-51"><img alt="" height="434" src="assets/mfpr_0651.png" width="600"/>
<h6><span class="label">Figure 6-51. </span>Signal chart on ETHUSD</h6>
</div></figure>
</div></section>
<section data-pdf-bookmark="The Tower Pattern" data-type="sect1"><div class="sect1" id="idm46762860098496">
<h1>The Tower Pattern</h1>
<p>The <em>Tower </em>pattern<a contenteditable="false" data-primary="contrarian patterns" data-secondary="Tower pattern" data-type="indexterm" id="ix_contra_tower_ch6"/><a contenteditable="false" data-primary="Tower pattern" data-type="indexterm" id="ix_tower_patt_ch6"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Tower pattern" data-type="indexterm" id="ix_class_contra_tower_ch6"/> is a multicandle (generally five) contrarian configuration that signals the end of a gradual trend. The bullish Tower Bottom pattern starts with a bearish candlestick followed by three small-bodied candles, with the middle one being slightly lower than the other two. Finally, a normal-sized bullish candlestick must appear to confirm the upside exit. <a data-type="xref" href="#figure6-52">Figure 6-52</a> illustrates a Tower Bottom pattern.</p>
<figure><div class="figure" id="figure6-52"><img alt="" height="219" src="assets/mfpr_0652.png" width="600"/>
<h6><span class="label">Figure 6-52. </span>A Tower Bottom</h6>
</div></figure>
<p>The bearish Tower Top pattern starts with a bullish candlestick followed by three small-bodied candles, with the middle one being slightly higher than the other two. Finally, a normal-sized bearish candlestick must appear to confirm the downside exit. <a data-type="xref" href="#figure6-53">Figure 6-53</a> illustrates a Tower Top pattern.</p>
<figure><div class="figure" id="figure6-53"><img alt="" height="220" src="assets/mfpr_0653.png" width="600"/>
<h6><span class="label">Figure 6-53. </span>A Tower Top</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The Tower pattern is a stabilization configuration that hints at a possible end of the initial trend.</p>
</div>
<p>The intuition behind the Tower Bottom pattern is that after a bearish move, the small-bodied candles hint at a possible stabilization, which turns out to be an expected bullish reversal by the last bullish candle. Similarly, the Tower Top pattern hints at a possible consolidation before the bearish candle validates the downside move.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Multicandle patterns are sometimes hard to code due to their vague conditions. Many versions of the Tower pattern exist, but I have found that sticking with a maximum of five candles is better than creating conditions involving more candles.</p>
</div>
<p>The signal function for the Tower pattern is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">signal</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>           </code><code class="n">buy_column</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">)</code><code class="p">:</code><code>
</code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>    </code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>  </code><code>
</code><code>        </code><code>
</code><code>       </code><code class="k">try</code><code class="p">:</code><code>
</code><code>           </code><code>
</code><strong><code>           </code><code class="c1"># Bullish pattern</code></strong><code>
</code><code>           </code><code class="k">if</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>              </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                  </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">buy_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><strong><code>           </code><code class="c1"># Bearish pattern</code></strong><code>
</code><code>           </code><code class="k">elif</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="ow">and</code><code> </code><code>\
</code><code>                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">4</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code> </code><code class="o">-</code><code> </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">&gt;</code><code> </code><code class="n">body</code><code class="p">:</code><code>
</code><code>                 </code><code>
</code><code>                    </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">sell_column</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="o">-</code><code class="mi">1</code><code> </code><code>
</code><code>                    </code><code>
</code><code>       </code><code class="k">except</code><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><code>            </code><code>
</code><code>            </code><code class="k">pass</code><code>
</code><code>        </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p><a data-type="xref" href="#figure6-54">Figure 6-54</a> shows a signal chart on USDCAD.</p>
<figure><div class="figure" id="figure6-54"><img alt="" height="414" src="assets/mfpr_0654.png" width="600"/>
<h6><span class="label">Figure 6-54. </span>Signal chart on USDCAD</h6>
</div></figure>
<p><a data-type="xref" href="#figure6-55">Figure 6-55</a> shows a signal chart on GBPUSD.</p>
<figure><div class="figure" id="figure6-55"><img alt="" height="414" src="assets/mfpr_0655.png" width="600"/>
<h6><span class="label">Figure 6-55. </span>Signal chart on GBPUSD</h6>
</div></figure>
<p><a data-type="xref" href="#table6-11">Table 6-11</a> summarizes the performance of the pattern<a contenteditable="false" data-primary="" data-startref="ix_tower_patt_ch6" data-type="indexterm" id="idm46762860717280"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_tower_ch6" data-type="indexterm" id="idm46762860715904"/><a contenteditable="false" data-primary="" data-startref="ix_contra_tower_ch6" data-type="indexterm" id="idm46762860805808"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_ch6" data-type="indexterm" id="idm46762860804432"/>.</p>
<table id="table6-11">
<caption><span class="label">Table 6-11. </span>Tower pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>49.31%</td>
<td>1.01</td>
<td>1.04</td>
<td>878</td>
</tr>
<tr>
<td>USDCHF</td>
<td>50.47%</td>
<td>1.2</td>
<td>1.18</td>
<td>735</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>46.30%</td>
<td>0.95</td>
<td>1.10</td>
<td>1203</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.44%</td>
<td>1.09</td>
<td>1.07</td>
<td>1013</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>43.33%</td>
<td>1.06</td>
<td>1.38</td>
<td>503</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>45.45%</td>
<td>0.88</td>
<td>1.05</td>
<td>231</td>
</tr>
<tr>
<td>GOLD</td>
<td>47.32%</td>
<td>0.73</td>
<td>0.81</td>
<td>336</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>43.75%</td>
<td>0.85</td>
<td>1.09</td>
<td>16</td>
</tr>
<tr>
<td>FTSE100</td>
<td>50.00%</td>
<td>1.27</td>
<td>1.27</td>
<td>60</td>
</tr>
</tbody>
</table>
</div></section>
</div></section></div></body></html>