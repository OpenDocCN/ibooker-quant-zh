<html><head></head><body>
<div id="sbo-rt-content"><section data-pdf-bookmark="Chapter 8. Advanced Candlestick-Charting Systems" data-type="chapter" epub:type="chapter"><div class="chapter" id="chapter8">
<h1><span class="label">Chapter 8. </span>Advanced Candlestick-Charting Systems</h1>
<p>So far, you’ve gotten a grand tour of the many different kinds of patterns that may be of use to you, but candlestick charting can also be creative and doesn’t have to stop at the basic construction methods. This chapter presents two candlestick-charting systems that offer diverse alternatives to the original system.</p>
<p>While the original system presents the OHLC data as it is, the two proposed systems covered in this chapter take a different approach to understanding the data and squeezing as much information as possible from it.</p>
<p>The first<a contenteditable="false" data-primary="noise-canceling techniques" data-seealso="smoothing" data-type="indexterm" id="idm46762854371648"/><a contenteditable="false" data-primary="OHLC data" data-secondary="basic versus advanced charting" data-type="indexterm" id="idm46762854370272"/> advanced charting system is Heikin-Ashi, which transforms the OHLC data in order to help trend followers get a less noisy view of the ongoing regime. The second charting system is K’s candlesticks, which are simply a smoothed version of OHLC data where candlestick patterns are applied in order to find more signals, all while reducing noise.</p>
<p>The aim of this chapter is to add these two powerful charting systems to your trading framework so that you have a different angle view. Ideally, when checking for patterns using the original candlestick-charting system, you should also check for the same patterns on these two alternative candlestick systems.</p>
<section data-pdf-bookmark="Heikin-Ashi System" data-type="sect1"><div class="sect1" id="idm46762854522544">
<h1>Heikin-Ashi System</h1>
<p>The Heikin-Ashi system is also known<a contenteditable="false" data-primary="Heikin-Ashi system" data-type="indexterm" id="ix_heikinashi_ch8"/><a contenteditable="false" data-primary="candlestick pattern charting" data-secondary="Heikin-Ashi system" data-type="indexterm" id="ix_candle_chart_heikin_ch8"/> as Heikin-Ashi candlesticks. The term <em>heikin-ashi</em> means “average bar” in Japanese, which is intuitive considering the way it is calculated. The main aim of creating a Heikin-Ashi chart is to understand the underlying trend and to filter out the noise caused by random fluctuations.</p>
<p>You can consider<a contenteditable="false" data-primary="smoothing" data-secondary="Heikin-Ashi charts" data-type="indexterm" id="ix_smooth_heikin"/><a contenteditable="false" data-primary="noise-canceling techniques" data-type="indexterm" id="idm46762854375008"/> the system a noise-canceling technique that leaves you with a smoothed candlestick chart. <em>Heikin-Ashi</em> takes the open, high, low, and close prices and transforms them using simple formulas and then charts the results.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>By transforming<a contenteditable="false" data-primary="OHLC data" data-secondary="Heikin-Ashi calculation" data-type="indexterm" id="idm46762854275248"/> the OHLC data, Heikin-Ashi charts do not represent real values but rather <em>smoothed </em>values. For instance, a bearish Heikin-Ashi candlestick does not necessarily represent a true bearish candlestick, and its close price also does not necessarily equal the true candlestick close price. In fact, it is rare that the Heikin-Ashi close price is the real close price.</p>
</div>
<p>To calculate the Heikin-Ashi open price, use the following formula:</p>
<div data-type="equation">
<math alttext="Transformed open price Subscript i Baseline equals StartFraction Open price Subscript i minus 1 Baseline plus Close price Subscript i minus 1 Baseline Over 2 EndFraction">
<mrow>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>open</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>Open</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub><mo>+</mo><mtext>Close</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub></mrow> <mn>2</mn></mfrac>
</mrow>
</math>
</div>
<p>To calculate the Heikin-Ashi high price, use the following formula:</p>
<div data-type="equation">
<math>
<mrow>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>high</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mi>m</mi>
<mi>a</mi>
<mi>x</mi>
<mrow>
<mo>(</mo>
<mtext>High</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo lspace="0%" rspace="0%">,</mo>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>open</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo lspace="0%" rspace="0%">,</mo>
<mspace linebreak="newline"/>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>close</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>)</mo>
</mrow>
</mrow>
</math>
</div>
<p>To calculate the Heikin-Ashi low price, use the following formula:</p>
<div data-type="equation">
<math>
<mrow>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>low</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mi>m</mi>
<mi>i</mi>
<mi>n</mi>
<mrow>
<mo>(</mo>
<mtext>Low</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo lspace="0%" rspace="0%">,</mo>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>open</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo lspace="0%" rspace="0%">,</mo>
<mspace linebreak="newline"/>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>close</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>)</mo>
</mrow>
</mrow>
</math>
</div>
<p>To calculate the Heikin-Ashi close price, use the following formula:</p>
<div data-type="equation">
<math alttext="Transformed close price Subscript i Baseline equals StartFraction Open price Subscript i Baseline plus High price Subscript i Baseline plus Low price Subscript i Baseline plus Close price Subscript i Baseline Over 4 EndFraction">
<mrow>
<mtext>Transformed</mtext>
<mspace width="4.pt"/>
<mtext>close</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>Open</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>High</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>Low</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>Close</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub></mrow> <mn>4</mn></mfrac>
</mrow>
</math>
</div>
<p>The first thing to notice about Heikin-Ashi charts is that color alternation between candlesticks is less common than in normal candlestick charts due to the smoothing effect, and this is a desirable trait. <a data-type="xref" href="#figure8-1">Figure 8-1</a> shows the difference between the two systems on AUDNZD. Try figuring out which one is the Heikin-Ashi chart.</p>
<figure><div class="figure" id="figure8-1"><img alt="" height="294" src="assets/mfpr_0801.png" width="600"/>
<h6><span class="label">Figure 8-1. </span>On the top, a Heikin-Ashi chart of AUDNZD; on the bottom, a normal candlestick chart of AUDNZD</h6>
</div></figure>
<p>Notice how relatively easier it is to interpret the Heikin-Ashi chart because green (bullish) candlesticks are clustered together to show that the current trend is bullish and red (bearish) candlesticks are clustered together to show that the current trend is bearish. This is the power of smoothing.</p>
<p><a data-type="xref" href="#figure8-2">Figure 8-2</a> shows the difference between the two systems on GBPAUD.</p>
<figure><div class="figure" id="figure8-2"><img alt="" height="297" src="assets/mfpr_0802.png" width="600"/>
<h6><span class="label">Figure 8-2. </span>On the top, a Heikin-Ashi chart of the GBPAUD; on the bottom, a normal candlestick chart of the GBPAUD</h6>
</div></figure>
<p class="pagebreak-before">There are some limitations to Heikin-Ashi charts:</p>
<ul>
<li>The OHLC Heikin-Ashi values are not real prices as they have been transformed.</li>
<li>In flat markets, Heikin-Ashi candlesticks will alternate in color, which hinders their ability to give signals.</li>
<li>A change in color can sometimes be lagging, which may mean part of the move has already occurred by the time it is detected.</li>
</ul>
<p>The way you can create a Heikin-Ashi candlestick chart is to use the OHLC of the four columns of the array, apply the transformation, and output the results in the next four columns of the array. The function is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">heikin_ashi</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code>
</code><code>                </code><code class="n">position</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code>
</code><code>    </code><code>
</code><strong><code>    </code><code class="c1"># Heikin-Ashi Open</code></strong><code>
</code><code>    </code><code class="k">try</code><code class="p">:</code><code>
</code><code>        </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>
</code><code>            </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">+</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code> </code><code class="o">-</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">/</code><code> </code><code class="mi">2</code><code>
</code><code>    </code><code class="k">except</code><code class="p">:</code><code>
</code><code>        </code><code class="k">pass</code><code>
</code><code>    </code><code>
</code><strong><code>    </code><code class="c1"># Heikin-Ashi High</code></strong><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>    </code><code>
</code><code>        </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="nb">max</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code class="p">]</code><code class="p">,</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">3</code><code class="p">]</code><code class="p">,</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code class="p">)</code><code>
</code><code>    </code><code>
</code><strong><code>    </code><code class="c1"># Heikin-Ashi Low    </code></strong><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>    </code><code>
</code><code>        </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">2</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="nb">min</code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code class="p">]</code><code class="p">,</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">3</code><code class="p">]</code><code class="p">,</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code class="p">)</code><code>      </code><code>
</code><code>
</code><strong><code>    </code><code class="c1"># Heikin-Ashi Close</code></strong><code>
</code><code>    </code><code class="k">for</code><code> </code><code class="n">i</code><code> </code><code class="ow">in</code><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">data</code><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">3</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="p">(</code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">]</code><code> </code><code class="o">+</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">]</code><code> </code><code class="o">+</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">]</code><code> </code><code class="o">+</code><code> </code><code>
</code><code>                                </code><code class="n">data</code><code class="p">[</code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">]</code><code class="p">)</code><code> </code><code class="o">/</code><code> </code><code class="mi">4</code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code>
</code></pre>
<p>Let’s now see how to apply some of the previously seen candlesticks on Heikin-Ashi charts, which should give a diversification effect.</p>
<section data-pdf-bookmark="Detecting the Doji Pattern" data-type="sect2"><div class="sect2" id="idm46762854145920">
<h2>Detecting the Doji Pattern</h2>
<p>As a reminder<a contenteditable="false" data-primary="Heikin-Ashi system" data-secondary="Doji pattern" data-type="indexterm" id="ix_heikin_doji"/><a contenteditable="false" data-primary="Doji pattern" data-secondary="Heikin-Ashi system" data-type="indexterm" id="ix_doji_heikin"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_contra_doji_ch8"/><a contenteditable="false" data-primary="indecision pattern, Doji as" data-type="indexterm" id="idm46762855142464"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_class_contra_doji_ch8"/>, the Doji pattern is an indecision and contrarian configuration characterized by the following conditions:</p>
<ul>
<li>If the current close price is greater than the current open price, the previous close price equals the open price, and the prior close price is lower than the prior open price, then a bullish Doji has been printed.</li>
<li>If the current close price is lower than the current open price, the previous close price equals the open price, and the prior close price is greater than the prior open price, then a bearish Doji has been printed.</li>
</ul>
<p><a data-type="xref" href="#figure8-3">Figure 8-3</a> shows a signal chart with the same signals superimposed on a Heikin-Ashi chart (top) and a normal candlestick chart (bottom).</p>
<figure><div class="figure" id="figure8-3"><img alt="" height="297" src="assets/mfpr_0803.png" width="600"/>
<h6><span class="label">Figure 8-3. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is USDCHF.</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The bottom panel in <a data-type="xref" href="#figure8-3">Figure 8-3</a> shows where the real signals are relative to real OHLC data. In reality, you can see that there is little difference between the position of estimated and real signals.</p>
</div>
<p><a data-type="xref" href="#figure8-4">Figure 8-4</a> shows a signal chart on USDCAD. Don’t forget to round the values according to the analyzed asset.</p>
<figure><div class="figure" id="figure8-4"><img alt="" height="297" src="assets/mfpr_0804.png" width="600"/>
<h6><span class="label">Figure 8-4. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The asset is USDCAD.</h6>
</div></figure>
<p>Let’s check<a contenteditable="false" data-primary="OHLC data" data-secondary="using real versus smoothed" data-type="indexterm" id="idm46762855271072"/> the performance of the pattern (see <a data-type="xref" href="#table8-1">Table 8-1</a>). It is important to calculate the performance metrics using real OHLC data and not the transformed values so that you do not bias your system<a contenteditable="false" data-primary="" data-startref="ix_doji_heikin" data-type="indexterm" id="idm46762855268560"/><a contenteditable="false" data-primary="" data-startref="ix_heikin_doji" data-type="indexterm" id="idm46762855267184"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_doji_ch8" data-type="indexterm" id="idm46762855265808"/><a contenteditable="false" data-primary="" data-startref="ix_contra_doji_ch8" data-type="indexterm" id="idm46762855264368"/>.</p>
<table id="table8-1">
<caption><span class="label">Table 8-1. </span>Heikin-Ashi chart with Doji pattern: performance summary table</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>49,67%</td>
<td>1,07</td>
<td>1,08</td>
<td>2126</td>
</tr>
<tr>
<td>USDCHF</td>
<td>47,30%</td>
<td>1,07</td>
<td>1,19</td>
<td>2359</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>48,73%</td>
<td>1,03</td>
<td>1,08</td>
<td>1660</td>
</tr>
<tr>
<td>USDCAD</td>
<td>48,18%</td>
<td>0,97</td>
<td>1,04</td>
<td>1982</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>46,54%</td>
<td>0,84</td>
<td>0,97</td>
<td>434</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>44,91%</td>
<td>0,81</td>
<td>0,99</td>
<td>1534</td>
</tr>
<tr>
<td>GOLD</td>
<td>44,93%</td>
<td>1,05</td>
<td>1,29</td>
<td>3394</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>50,12%</td>
<td>0,85</td>
<td>0,84</td>
<td>401</td>
</tr>
<tr>
<td>FTSE100</td>
<td>52,10%</td>
<td>1,09</td>
<td>1,00</td>
<td>261</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Detecting the Tasuki Pattern" data-type="sect2"><div class="sect2" id="idm46762854145424">
<h2>Detecting the Tasuki Pattern</h2>
<p>As a reminder<a contenteditable="false" data-primary="trend-following patterns" data-secondary="Tasuki pattern" data-type="indexterm" id="ix_trend_tasuki_ch8"/><a contenteditable="false" data-primary="Heikin-Ashi system" data-secondary="Tasuki pattern" data-type="indexterm" id="ix_heikin_tasuki_ch8"/><a contenteditable="false" data-primary="Tasuki pattern" data-type="indexterm" id="ix_tasuki_patt_ch8"/><a contenteditable="false" data-primary="classic trend-following patterns" data-secondary="Tasuki pattern" data-type="indexterm" id="ix_class_trend_tasuki_ch8"/>, the Tasuki pattern is a trend-following configuration characterized by the following conditions:</p>
<ul>
<li>If the close price from two periods ago is greater than the open price from two periods ago, the open price from one period ago is greater than the close two periods ago, the close price from one period ago is greater than the open price from one period ago, and the current close price is greater than the close price two periods ago, then a bullish Tasuki has been printed.</li>
<li>If the close price from two periods ago is lower than the open price from two periods ago, the open price from one period ago is lower than the close two periods ago, the close price from one period ago is lower than the open price from one period ago, and the current close price is lower than the close price two periods ago, then a bearish Tasuki has been printed.</li>
</ul>
<p><a data-type="xref" href="#figure8-5">Figure 8-5</a> shows a signal chart on GBPAUD.</p>
<figure><div class="figure" id="figure8-5"><img alt="" height="297" src="assets/mfpr_0805.png" width="600"/>
<h6><span class="label">Figure 8-5. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is GBPAUD.</h6>
</div></figure>
<p>To create the double-plot signal chart, use the following code:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code> <code class="nf">candlestick_double_plot</code><code class="p">(</code><code class="n">data</code><code class="p">,</code> <code class="n">buy_column</code><code class="p">,</code> <code class="n">sell_column</code><code class="p">,</code> <code class="n">window</code> <code class="o">=</code> <code class="mi">250</code><code class="p">):</code>
 
    <code class="n">fig</code><code class="p">,</code> <code class="n">ax</code> <code class="o">=</code> <code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="n">figsize</code> <code class="o">=</code> <code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">5</code><code class="p">))</code>

    <code class="n">sample</code> <code class="o">=</code> <code class="n">data</code><code class="p">[</code><code class="o">-</code><code class="n">window</code><code class="p">:,</code> <code class="p">]</code>
    
    <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">sample</code><code class="p">)):</code>
        
        <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">6</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">5</code><code class="p">],</code> 
                     <code class="n">color</code> <code class="o">=</code> <code class="s1">'black'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">1</code><code class="p">)</code>  
        
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">]</code> <code class="o">&gt;</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">],</code> 
                         <code class="n">color</code> <code class="o">=</code> <code class="s1">'mediumseagreen'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">3</code><code class="p">)</code>  

        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">]</code> <code class="o">&lt;</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">],</code> 
                         <code class="n">color</code> <code class="o">=</code> <code class="s1">'maroon'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">3</code><code class="p">)</code>  
            
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">]</code> <code class="o">==</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">7</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">4</code><code class="p">]</code> <code class="o">+</code> 
                         <code class="mf">0.00005</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'black'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mf">1.00</code><code class="p">)</code>  
            
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="n">buy_column</code><code class="p">]</code> <code class="o">==</code> <code class="mi">1</code><code class="p">:</code>
            
            <code class="n">x</code> <code class="o">=</code> <code class="n">i</code>
            <code class="n">y</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code>
        
            <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">annotate</code><code class="p">(</code><code class="s1">' '</code><code class="p">,</code> <code class="n">xy</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">),</code> 
                        <code class="n">arrowprops</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">(</code><code class="n">width</code> <code class="o">=</code> <code class="mi">9</code><code class="p">,</code> <code class="n">headlength</code> <code class="o">=</code> <code class="mi">11</code><code class="p">,</code> 
                                          <code class="n">headwidth</code> <code class="o">=</code> <code class="mi">11</code><code class="p">,</code> <code class="n">facecolor</code> <code class="o">=</code> 
                                          <code class="s1">'green'</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'green'</code><code class="p">))</code>
        
        <code class="k">elif</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="n">sell_column</code><code class="p">]</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code><code class="p">:</code>
            
            <code class="n">x</code> <code class="o">=</code> <code class="n">i</code>
            <code class="n">y</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code>
        
            <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">annotate</code><code class="p">(</code><code class="s1">' '</code><code class="p">,</code> <code class="n">xy</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">),</code> 
                        <code class="n">arrowprops</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">(</code><code class="n">width</code> <code class="o">=</code> <code class="mi">9</code><code class="p">,</code> <code class="n">headlength</code> <code class="o">=</code> <code class="o">-</code><code class="mi">11</code><code class="p">,</code>
                                          <code class="n">headwidth</code> <code class="o">=</code> <code class="o">-</code><code class="mi">11</code><code class="p">,</code> <code class="n">facecolor</code> <code class="o">=</code> 
                                          <code class="s1">'red'</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'red'</code><code class="p">))</code>  

    <code class="n">ax</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">grid</code><code class="p">()</code>

    <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><code class="n">sample</code><code class="p">)):</code>
        
        <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">1</code><code class="p">],</code>
                     <code class="n">color</code> <code class="o">=</code> <code class="s1">'black'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">1</code><code class="p">)</code>  
        
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code> <code class="o">&gt;</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code>
                         <code class="n">color</code> <code class="o">=</code> <code class="s1">'mediumseagreen'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">3</code><code class="p">)</code>  

        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code> <code class="o">&lt;</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code>
                         <code class="n">color</code> <code class="o">=</code> <code class="s1">'maroon'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mi">3</code><code class="p">)</code>  
            
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">]</code> <code class="o">==</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]:</code>
            
            <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">vlines</code><code class="p">(</code><code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="p">,</code> <code class="n">ymin</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">3</code><code class="p">],</code> <code class="n">ymax</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code> <code class="o">+</code>
                         <code class="mf">0.00005</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'black'</code><code class="p">,</code> <code class="n">linewidth</code> <code class="o">=</code> <code class="mf">1.00</code><code class="p">)</code>  
 
        <code class="k">if</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="n">buy_column</code><code class="p">]</code> <code class="o">==</code> <code class="mi">1</code><code class="p">:</code>
            
            <code class="n">x</code> <code class="o">=</code> <code class="n">i</code>
            <code class="n">y</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code>
        
            <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">annotate</code><code class="p">(</code><code class="s1">' '</code><code class="p">,</code> <code class="n">xy</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">),</code> 
                        <code class="n">arrowprops</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">(</code><code class="n">width</code> <code class="o">=</code> <code class="mi">9</code><code class="p">,</code> <code class="n">headlength</code> <code class="o">=</code> <code class="mi">11</code><code class="p">,</code> 
                                          <code class="n">headwidth</code> <code class="o">=</code> <code class="mi">11</code><code class="p">,</code> <code class="n">facecolor</code> <code class="o">=</code> 
                                          <code class="s1">'green'</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'green'</code><code class="p">))</code>
        
        <code class="k">elif</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="n">sell_column</code><code class="p">]</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code><code class="p">:</code>
            
            <code class="n">x</code> <code class="o">=</code> <code class="n">i</code>
            <code class="n">y</code> <code class="o">=</code> <code class="n">sample</code><code class="p">[</code><code class="n">i</code><code class="p">,</code> <code class="mi">0</code><code class="p">]</code>
        
            <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">annotate</code><code class="p">(</code><code class="s1">' '</code><code class="p">,</code> <code class="n">xy</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">),</code> 
                        <code class="n">arrowprops</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">(</code><code class="n">width</code> <code class="o">=</code> <code class="mi">9</code><code class="p">,</code> <code class="n">headlength</code> <code class="o">=</code> <code class="o">-</code><code class="mi">11</code><code class="p">,</code> 
                                          <code class="n">headwidth</code> <code class="o">=</code> <code class="o">-</code><code class="mi">11</code><code class="p">,</code> <code class="n">facecolor</code> <code class="o">=</code> 
                                          <code class="s1">'red'</code><code class="p">,</code> <code class="n">color</code> <code class="o">=</code> <code class="s1">'red'</code><code class="p">))</code>  

            
    <code class="n">ax</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">grid</code><code class="p">()</code>
</pre>
<p><a data-type="xref" href="#figure8-6">Figure 8-6</a> shows a signal chart on EURCHF.</p>
<figure><div class="figure" id="figure8-6"><img alt="" height="295" src="assets/mfpr_0806.png" width="600"/>
<h6><span class="label">Figure 8-6. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is EURCHF.</h6>
</div></figure>
<p><a data-type="xref" href="#table8-2">Table 8-2</a> summarizes the performance metrics of an algorithm that scans and trades the Tasuki pattern on Heikin-Ashi charts<a contenteditable="false" data-primary="" data-startref="ix_tasuki_patt_ch8" data-type="indexterm" id="idm46762855525648"/><a contenteditable="false" data-primary="" data-startref="ix_trend_tasuki_ch8" data-type="indexterm" id="idm46762855524272"/><a contenteditable="false" data-primary="" data-startref="ix_class_trend_tasuki_ch8" data-type="indexterm" id="idm46762855522896"/><a contenteditable="false" data-primary="" data-startref="ix_heikin_tasuki_ch8" data-type="indexterm" id="idm46762855521456"/>.</p>
<table id="table8-2">
<caption><span class="label">Table 8-2. </span>Heikin-Ashi chart with Tasuki pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>51.04%</td>
<td>0.83</td>
<td>0.80</td>
<td>384</td>
</tr>
<tr>
<td>USDCHF</td>
<td>50.00%</td>
<td>0.91</td>
<td>0.91</td>
<td>468</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>50.11%</td>
<td>0.98</td>
<td>0.97</td>
<td>441</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.90%</td>
<td>0.90</td>
<td>0.87</td>
<td>442</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>50.00%</td>
<td>0.94</td>
<td>0.93</td>
<td>248</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>52.14%</td>
<td>0.76</td>
<td>0.69</td>
<td>257</td>
</tr>
<tr>
<td>GOLD</td>
<td>47.04%</td>
<td>0.92</td>
<td>1.04</td>
<td>372</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>55.76%</td>
<td>1.12</td>
<td>0.88</td>
<td>52</td>
</tr>
<tr>
<td>FTSE100</td>
<td>44.64%</td>
<td>1.20</td>
<td>1.49</td>
<td>56</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Detecting the Euphoria Pattern" data-type="sect2"><div class="sect2" id="idm46762855773680">
<h2>Detecting the Euphoria Pattern</h2>
<p>As a reminder<a contenteditable="false" data-primary="Heikin-Ashi system" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_heikin_euphoria_ch8"/><a contenteditable="false" data-primary="Euphoria pattern" data-type="indexterm" id="ix_euphoria_patt_ch8"/><a contenteditable="false" data-primary="modern contrarian patterns" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_mod_contra_euphoria_ch8"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_contra_euphoria_ch8"/>, the Euphoria pattern is a contrarian configuration characterized by the following conditions:</p>
<ul>
<li>If the current bearish candlestick is greater in real size than the previous bearish candlestick and the previous bearish candlestick is greater in real size than the the prior bearish candlestick, then a bullish Euphoria is printed.</li>
<li>If the current bullish candlestick is greater in real size than the previous bullish candlestick and the previous bullish candlestick is greater in real size than the the prior bullish candlestick, then a bullish Euphoria is printed.</li>
</ul>
<p><a data-type="xref" href="#figure8-7">Figure 8-7</a> shows a signal chart on AUDNZD.</p>
<figure><div class="figure" id="figure8-7"><img alt="" height="294" src="assets/mfpr_0807.png" width="600"/>
<h6><span class="label">Figure 8-7. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is AUDNZD.</h6>
</div></figure>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Using<a contenteditable="false" data-primary="rounding() function" data-type="indexterm" id="idm46762853775712"/><a contenteditable="false" data-primary="rounding numbers" data-secondary="Euphoria pattern" data-type="indexterm" id="idm46762853774736"/> the <code>rounding()</code> function with the Euphoria pattern may help filter out some signals if you are looking to decrease the frequency.</p>
</div>
<p><a data-type="xref" href="#figure8-8">Figure 8-8</a> shows a signal<a contenteditable="false" data-primary="biases" data-secondary="invisible hand" data-type="indexterm" id="idm46762853771632"/><a contenteditable="false" data-primary="invisible hand (bias)" data-type="indexterm" id="idm46762853770416"/> chart on EURGBP. It is always interesting to keep the trend on your side. This is a technique that you will see in the chapter dealing with strategies. The main idea is that it is better to take into consideration a bullish reversal pattern during a bullish trend than during a bearish trend. This is because of the invisible trend hand, which helps push the prices toward the aggregate direction.</p>
<figure><div class="figure" id="figure8-8"><img alt="" height="294" src="assets/mfpr_0808.png" width="600"/>
<h6><span class="label">Figure 8-8. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is EURGBP.</h6>
</div></figure>
<p><a data-type="xref" href="#table8-3">Table 8-3</a> summarizes the performance metrics of an algorithm that scans and trades the Euphoria pattern on Heikin-Ashi charts<a contenteditable="false" data-primary="" data-startref="ix_euphoria_patt_ch8" data-type="indexterm" id="idm46762853766288"/><a contenteditable="false" data-primary="" data-startref="ix_heikin_euphoria_ch8" data-type="indexterm" id="idm46762853765072"/><a contenteditable="false" data-primary="" data-startref="ix_contra_euphoria_ch8" data-type="indexterm" id="idm46762853763856"/><a contenteditable="false" data-primary="" data-startref="ix_mod_contra_euphoria_ch8" data-type="indexterm" id="idm46762853762640"/>.</p>
<table id="table8-3">
<caption><span class="label">Table 8-3. </span>Heikin-Ashi chart with Euphoria pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>47.74%</td>
<td>1.01</td>
<td>1.11</td>
<td>2572</td>
</tr>
<tr>
<td>USDCHF</td>
<td>45.64%</td>
<td>0.91</td>
<td>1.09</td>
<td>2583</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>46.52%</td>
<td>1.00</td>
<td>1.15</td>
<td>2990</td>
</tr>
<tr>
<td>USDCAD</td>
<td>48.25%</td>
<td>1.08</td>
<td>1.16</td>
<td>2918</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>48.61%</td>
<td>1.04</td>
<td>1.1</td>
<td>2055</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>43.83%</td>
<td>0.8</td>
<td>1.02</td>
<td>933</td>
</tr>
<tr>
<td>GOLD</td>
<td>49.17%</td>
<td>1.06</td>
<td>1.09</td>
<td>543</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>46.28%</td>
<td>1.08</td>
<td>1.25</td>
<td>417</td>
</tr>
<tr>
<td>FTSE100</td>
<td>44.46%</td>
<td>0.94</td>
<td>1.17</td>
<td>497</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Detecting the Double Trouble Pattern" data-type="sect2"><div class="sect2" id="idm46762853787440">
<h2>Detecting the Double Trouble Pattern</h2>
<p>As a reminder<a contenteditable="false" data-primary="modern trend-following patterns" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_mod_trend_dble_trouble_ch8"/><a contenteditable="false" data-primary="Heikin-Ashi system" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_heikin_double_trouble_ch8"/><a contenteditable="false" data-primary="Double Trouble pattern" data-type="indexterm" id="ix_double_trouble_patt_ch8"/><a contenteditable="false" data-primary="trend-following patterns" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_trend_foll_dble_tble_ch8"/>, the Double Trouble pattern is a trend-following configuration characterized by the following conditions:</p>
<ul>
<li>The second bullish candlestick must be at least double the size (from high to low) of the previous candlestick’s 10-period ATR.</li>
<li>The second bearish candlestick must be at least double the size (from high to low) of the previous candlestick’s 10-period ATR.</li>
</ul>
<p><a data-type="xref" href="#figure8-9">Figure 8-9</a> shows a signal chart on USDCHF.</p>
<figure><div class="figure" id="figure8-9"><img alt="" height="298" src="assets/mfpr_0809.png" width="600"/>
<h6><span class="label">Figure 8-9. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is USDCHF.</h6>
</div></figure>
<p><a data-type="xref" href="#figure8-10">Figure 8-10</a> shows a signal chart on the USDJPY.</p>
<figure><div class="figure" id="figure8-10"><img alt="" height="299" src="assets/mfpr_0810.png" width="600"/>
<h6><span class="label">Figure 8-10. </span>On the top, signals (estimated) on Heikin-Ashi candlesticks; on the bottom, the same signals on real candlesticks. The asset is USDJPY.</h6>
</div></figure>
<p><a data-type="xref" href="#table8-4">Table 8-4</a> summarizes the performance metrics of an algorithm that scans and trades the Double Trouble pattern on Heikin-Ashi charts<a contenteditable="false" data-primary="" data-startref="ix_mod_trend_dble_trouble_ch8" data-type="indexterm" id="idm46762853719664"/><a contenteditable="false" data-primary="" data-startref="ix_double_trouble_patt_ch8" data-type="indexterm" id="idm46762853718448"/><a contenteditable="false" data-primary="" data-startref="ix_heikin_double_trouble_ch8" data-type="indexterm" id="idm46762853717232"/><a contenteditable="false" data-primary="" data-startref="ix_smooth_heikin" data-type="indexterm" id="idm46762853716016"/><a contenteditable="false" data-primary="" data-startref="ix_candle_chart_heikin_ch8" data-type="indexterm" id="idm46762853714800"/><a contenteditable="false" data-primary="" data-startref="ix_heikinashi_ch8" data-type="indexterm" id="idm46762853713584"/><a contenteditable="false" data-primary="" data-startref="ix_trend_foll_dble_tble_ch8" data-type="indexterm" id="idm46762853712368"/>.</p>
<table id="table8-4">
<caption><span class="label">Table 8-4. </span>Heikin-Ashi chart with Double Trouble pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>57.62%</td>
<td>0.92</td>
<td>0.67</td>
<td>1135</td>
</tr>
<tr>
<td>USDCHF</td>
<td>56.49%</td>
<td>1.08</td>
<td>0.84</td>
<td>110</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>53.72%</td>
<td>0.89</td>
<td>0.77</td>
<td>1167</td>
</tr>
<tr>
<td>USDCAD</td>
<td>56.14%</td>
<td>1.02</td>
<td>0.80</td>
<td>1058</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>62.84%</td>
<td>1.19</td>
<td>0.71</td>
<td>716</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>61.00%</td>
<td>1.04</td>
<td>0.67</td>
<td>659</td>
</tr>
<tr>
<td>GOLD</td>
<td>57.00%</td>
<td>0.96</td>
<td>0.73</td>
<td>1021</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>57.40%</td>
<td>1.36</td>
<td>1.00</td>
<td>162</td>
</tr>
<tr>
<td>FTSE100</td>
<td>54.13%</td>
<td>0.95</td>
<td>0.80</td>
<td>133</td>
</tr>
</tbody>
</table>
</div></section>
</div></section>
<section class="pagebreak-before" data-pdf-bookmark="K’s Candlesticks System" data-type="sect1"><div class="sect1" id="idm46762854521600">
<h1 class="less_space">K’s Candlesticks System</h1>
<p><em>K’s</em> candlesticks<a contenteditable="false" data-primary="K's Candlesticks system" data-type="indexterm" id="ix_ks_candl_ch8"/><a contenteditable="false" data-primary="OHLC data" data-secondary="K's Candlesticks calculation" data-type="indexterm" id="idm46762853680848"/><a contenteditable="false" data-primary="moving averages" data-type="indexterm" id="idm46762853679632"/><a contenteditable="false" data-primary="candlestick pattern charting" data-secondary="K’s Candlesticks system" data-type="indexterm" id="ix_candle_chart_ks"/><a contenteditable="false" data-primary="smoothing" data-secondary="K’s Candlesticks" data-type="indexterm" id="smooth_ks_candle_ch8"/> aim to further smooth out the OHLC values to gain a better understanding of the underlying trend while retaining the four elementary pieces of data.<sup><a data-type="noteref" href="ch08.xhtml#idm46762853675456" id="idm46762853675456-marker">1</a></sup> Therefore, K’s candlestick system calculates a simple moving average of OHLC data using a default lookback period of three.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>A period of three represents three hours in hourly charts and three days in daily charts.</p>
</div>
<p>To calculate the K’s open price, use the following formula:</p>
<div data-type="equation">
<!--p class="math-tex" data-type="tex">\(\text{K's open price}_{i} = \frac{\text{Open price}_{i}+\text{Open price}_{i-1}+\text{Open price}_{i-2}}{3}\)</p-->
<math alttext="upper K single-comma-quotation-mark s open price Subscript i Baseline equals StartFraction Open price Subscript i Baseline plus Open price Subscript i minus 1 Baseline plus Open price Subscript i minus 2 Baseline Over 3 EndFraction">
<mrow>
<mtext>K’s</mtext>
<mspace width="4.pt"/>
<mtext>open</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>Open</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>Open</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub><mo>+</mo><mtext>Open</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>2</mn></mrow> </msub></mrow> <mn>3</mn></mfrac>
</mrow>
</math>
</div>
<p>To calculate the K’s high price, use the following formula:</p>
<div data-type="equation">
<!--p class="math-tex" data-type="tex">\(\text{K's high price}_{i} = \frac{\text{High price}_{i}+\text{High price}_{i-1}+\text{High price}_{i-2}}{3}\)</p-->
<math alttext="upper K single-comma-quotation-mark s high price Subscript i Baseline equals StartFraction High price Subscript i Baseline plus High price Subscript i minus 1 Baseline plus High price Subscript i minus 2 Baseline Over 3 EndFraction">
<mrow>
<mtext>K’s</mtext>
<mspace width="4.pt"/>
<mtext>high</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>High</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>High</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub><mo>+</mo><mtext>High</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>2</mn></mrow> </msub></mrow> <mn>3</mn></mfrac>
</mrow>
</math>
</div>
<p>To calculate the K’s low price, use the following formula:</p>
<div data-type="equation">
<!--p class="math-tex" data-type="tex">\(\text{K's low price}_{i} = \frac{\text{Low price}_{i}+\text{Low price}_{i-1}+\text{Low price}_{i-2}}{3}\)</p-->
<math alttext="upper K single-comma-quotation-mark s low price Subscript i Baseline equals StartFraction Low price Subscript i Baseline plus Low price Subscript i minus 1 Baseline plus Low price Subscript i minus 2 Baseline Over 3 EndFraction">
<mrow>
<mtext>K’s</mtext>
<mspace width="4.pt"/>
<mtext>low</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>Low</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>Low</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub><mo>+</mo><mtext>Low</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>2</mn></mrow> </msub></mrow> <mn>3</mn></mfrac>
</mrow>
</math>
</div>
<p>To calculate the K’s close price, use the following formula:</p>
<div data-type="equation">
<!--p class="math-tex" data-type="tex">\(\text{K's close price}_{i} = \frac{\text{Close\ price}_{i}+\text{Close price}_{i-1}+\text{Close price}_{i-2}}{3}\)</p-->
<math alttext="upper K single-comma-quotation-mark s close price Subscript i Baseline equals StartFraction Close reverse-solidus price Subscript i Baseline plus Close price Subscript i minus 1 Baseline plus Close price Subscript i minus 2 Baseline Over 3 EndFraction">
<mrow>
<mtext>K’s</mtext>
<mspace width="4.pt"/>
<mtext>close</mtext>
<mspace width="4.pt"/>
<msub><mtext>price</mtext> <mi>i</mi> </msub>
<mo>=</mo>
<mfrac><mrow><mtext>Close</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mi>i</mi> </msub><mo>+</mo><mtext>Close</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>1</mn></mrow> </msub><mo>+</mo><mtext>Close</mtext><mspace width="4.pt"/><msub><mtext>price</mtext> <mrow><mi>i</mi><mo>-</mo><mn>2</mn></mrow> </msub></mrow> <mn>3</mn></mfrac>
</mrow>
</math>
</div>
<p><a data-type="xref" href="#figure8-11">Figure 8-11</a> shows the difference between a regular candlestick chart and a K’s <span class="keep-together">candlesticks</span> chart.</p>
<figure><div class="figure" id="figure8-11"><img alt="" height="297" src="assets/mfpr_0811.png" width="600"/>
<h6><span class="label">Figure 8-11. </span>On the top, a K’s candlesticks chart of EURUSD; on the bottom, a normal candlestick chart of EURUSD</h6>
</div></figure>
<p>You should notice that K’s candlesticks are even smoother than Heikin-Ashi candlesticks. This is because the smoothing period is 3 in K’s candlesticks while Heikin-Ashi has a smoothing period of 1.</p>
<p><a data-type="xref" href="#figure8-12">Figure 8-12</a> shows the difference between a regular AUDNZD candlestick chart and a K’s candlesticks chart on the same currency pair<a contenteditable="false" data-primary="" data-startref="smooth_ks_candle_ch8" data-type="indexterm" id="idm46762853616464"/>.</p>
<figure><div class="figure" id="figure8-12"><img alt="" height="294" src="assets/mfpr_0812.png" width="600"/>
<h6><span class="label">Figure 8-12. </span>On the top, a K’s candlesticks chart of AUDNZD; on the bottom, a normal candlestick chart of AUDNZD</h6>
</div></figure>
<p class="pagebreak-before">The limitations of K’s candlesticks charts are as follows:</p>
<ol>
<li>The OHLC K’s candlesticks values are not real prices as they are transformed.</li>
<li>In flat markets, K’s candlesticks will alternate in color, which hinders their ability to generate a signal.</li>
<li>The lag effect is even bigger than the one related to Heikin-Ashi candlesticks. However, it is not big enough to completely offset the benefits of the view.</li>
</ol>
<p>The function you can use to code K’s candlesticks is as follows:</p>
<pre data-code-language="python" data-executable="true" data-type="programlisting">
<code class="k">def</code><code> </code><code class="nf">k_candlesticks</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code>
</code><code>                   </code><code class="n">close_column</code><code class="p">,</code><code> </code><code class="n">lookback</code><code class="p">,</code><code> </code><code class="n">position</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">add_column</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">)</code><code>
</code><code>    </code><code>
</code><strong><code>    </code><code class="c1"># Averaging the open price</code></strong><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">ma</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">lookback</code><code class="p">,</code><code> </code><code class="n">open_column</code><code class="p">,</code><code> </code><code class="n">position</code><code class="p">)</code><code>
</code><code>     </code><code>
</code><strong><code>    </code><code class="c1"># Averaging the high price</code></strong><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">ma</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">lookback</code><code class="p">,</code><code> </code><code class="n">high_column</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="p">)</code><code>
</code><code>       </code><code>
</code><code>  </code><strong><code>  </code><code class="c1"># Averaging the low price</code></strong><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">ma</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">lookback</code><code class="p">,</code><code> </code><code class="n">low_column</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">2</code><code class="p">)</code><code>
</code><code>       </code><code>
</code><strong><code>    </code><code class="c1"># Averaging the close price</code></strong><code>
</code><code>    </code><code class="n">data</code><code> </code><code class="o">=</code><code> </code><code class="n">ma</code><code class="p">(</code><code class="n">data</code><code class="p">,</code><code> </code><code class="n">lookback</code><code class="p">,</code><code> </code><code class="n">close_column</code><code class="p">,</code><code> </code><code class="n">position</code><code> </code><code class="o">+</code><code> </code><code class="mi">3</code><code class="p">)</code><code>
</code><code>    </code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">data</code><code> </code></pre>
<p>Let’s see now how to apply some of the previously seen candlesticks on K’s candlesticks charts.</p>
<section data-pdf-bookmark="Detecting the Doji Pattern" data-type="sect2"><div class="sect2" id="idm46762853488096">
<h2>Detecting the Doji Pattern</h2>
<p>The Doji<a contenteditable="false" data-primary="K's Candlesticks system" data-secondary="Doji pattern" data-type="indexterm" id="ix_ks_doji"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_contra_doji_ks"/><a contenteditable="false" data-primary="Doji pattern" data-secondary="K's Candlesticks system" data-type="indexterm" id="ix_doji_ks"/><a contenteditable="false" data-primary="classic contrarian patterns" data-secondary="Doji pattern" data-type="indexterm" id="ix_class_contra_doji_ks"/> pattern is probably one of the best patterns to detect with K’s candlesticks as it is correlated with many forms of short-term and long-term reversals. <a data-type="xref" href="#figure8-13">Figure 8-13</a> shows a signal chart on GBPUSD.</p>
<figure><div class="figure" id="figure8-13"><img alt="" height="300" src="assets/mfpr_0813.png" width="600"/>
<h6><span class="label">Figure 8-13. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is GBPUSD.</h6>
</div></figure>
<p><a data-type="xref" href="#figure8-14">Figure 8-14</a> shows a signal chart on USDCAD. On ranging markets, reversal patterns work relatively better.</p>
<figure><div class="figure" id="figure8-14"><img alt="" height="297" src="assets/mfpr_0814.png" width="600"/>
<h6><span class="label">Figure 8-14. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is USDCAD.</h6>
</div></figure>
<p class="pagebreak-before"><a data-type="xref" href="#table8-5">Table 8-5</a> summarizes the performance metrics of an algorithm that scans and trades the Doji pattern on K’s candlesticks charts. Remember that one of the keys to improving performance is optimizing the entry and exit techniques<a contenteditable="false" data-primary="" data-startref="ix_doji_ks" data-type="indexterm" id="idm46762853441008"/><a contenteditable="false" data-primary="" data-startref="ix_ks_doji" data-type="indexterm" id="idm46762853439792"/><a contenteditable="false" data-primary="" data-startref="ix_class_contra_doji_ks" data-type="indexterm" id="idm46762853438576"/><a contenteditable="false" data-primary="" data-startref="ix_contra_doji_ks" data-type="indexterm" id="idm46762853437360"/>.</p>
<table id="table8-5">
<caption><span class="label">Table 8-5. </span>K’s candlesticks with Doji pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>43.66%</td>
<td>0.81</td>
<td>1.05</td>
<td>2352</td>
</tr>
<tr>
<td>USDCHF</td>
<td>43.80%</td>
<td>0.90</td>
<td>1.15</td>
<td>2479</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>46.19%</td>
<td>1.07</td>
<td>1.24</td>
<td>1840</td>
</tr>
<tr>
<td>USDCAD</td>
<td>45.07%</td>
<td>1.02</td>
<td>1.24</td>
<td>2143</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>44.23%</td>
<td>0.90</td>
<td>1.13</td>
<td>486</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>45.93%</td>
<td>1.20</td>
<td>1.41</td>
<td>1132</td>
</tr>
<tr>
<td>GOLD</td>
<td>45.60%</td>
<td>0.89</td>
<td>1.06</td>
<td>2445</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>42.70%</td>
<td>0.89</td>
<td>1.19</td>
<td>384</td>
</tr>
<tr>
<td>FTSE100</td>
<td>46.44%</td>
<td>1.19</td>
<td>1.37</td>
<td>267</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Detecting the Tasuki Pattern" data-type="sect2"><div class="sect2" id="idm46762853409248">
<h2>Detecting the Tasuki Pattern</h2>
<p><a data-type="xref" href="#figure8-15">Figure 8-15</a> shows a signal<a contenteditable="false" data-primary="classic trend-following patterns" data-secondary="Tasuki pattern" data-type="indexterm" id="idm46762853407264"/><a contenteditable="false" data-primary="K's Candlesticks system" data-secondary="Tasuki pattern" data-type="indexterm" id="idm46762853406048"/><a contenteditable="false" data-primary="Tasuki pattern" data-type="indexterm" id="idm46762853404832"/><a contenteditable="false" data-primary="trend-following patterns" data-secondary="Tasuki pattern" data-type="indexterm" id="idm46762853403856"/> chart on AUDNZD.</p>
<figure><div class="figure" id="figure8-15"><img alt="" height="294" src="assets/mfpr_0815.png" width="600"/>
<h6><span class="label">Figure 8-15. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is AUDNZD.</h6>
</div></figure>
<p class="pagebreak-before"><a data-type="xref" href="#table8-6">Table 8-6</a> summarizes the performance metrics of an algorithm that scans and trades the Tasuki pattern on K’s candlesticks charts.</p>
<table id="table8-6">
<caption><span class="label">Table 8-6. </span>K’s candlesticks with Tasuki pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>50.00%</td>
<td>1.11</td>
<td>1.11</td>
<td>50</td>
</tr>
<tr>
<td>USDCHF</td>
<td>51.68%</td>
<td>0.83</td>
<td>0.78</td>
<td>89</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>56.66%</td>
<td>1.65</td>
<td>1.26</td>
<td>60</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.79%</td>
<td>1.19</td>
<td>1.15</td>
<td>63</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>43.24%</td>
<td>0.78</td>
<td>1.02</td>
<td>74</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>60.38%</td>
<td>0.81</td>
<td>0.53</td>
<td>53</td>
</tr>
<tr>
<td>GOLD</td>
<td>55.38%</td>
<td>1.01</td>
<td>0.81</td>
<td>130</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>47.05%</td>
<td>0.77</td>
<td>0.86</td>
<td>17</td>
</tr>
<tr>
<td>FTSE100</td>
<td>50.00%</td>
<td>1.80</td>
<td>1.8</td>
<td>24</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Detecting the Euphoria Pattern" data-type="sect2"><div class="sect2" id="idm46762853372736">
<h2>Detecting the Euphoria Pattern</h2>
<p><a data-type="xref" href="#figure8-16">Figure 8-16</a> shows a signal<a contenteditable="false" data-primary="modern contrarian patterns" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_mod_contra_euphoria_ch82"/><a contenteditable="false" data-primary="Euphoria pattern" data-type="indexterm" id="ix_euphoria_patt_ch82"/><a contenteditable="false" data-primary="K's Candlesticks system" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_ks_euphoria_ch8"/><a contenteditable="false" data-primary="contrarian patterns" data-secondary="Euphoria pattern" data-type="indexterm" id="ix_contra_euphoria_ch82"/> chart on AUDNZD.</p>
<figure><div class="figure" id="figure8-16"><img alt="" height="294" src="assets/mfpr_0816.png" width="600"/>
<h6><span class="label">Figure 8-16. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is AUDNZD.</h6>
</div></figure>
<p class="pagebreak-before"><a data-type="xref" href="#figure8-17">Figure 8-17</a> shows a signal chart on AUDJPY.</p>
<figure><div class="figure" id="figure8-17"><img alt="" height="302" src="assets/mfpr_0817.png" width="600"/>
<h6><span class="label">Figure 8-17. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is AUDJPY.</h6>
</div></figure>
<p><a data-type="xref" href="#table8-7">Table 8-7</a> summarizes the performance metrics of an algorithm that scans and trades the Euphoria pattern on K’s candlesticks charts<a contenteditable="false" data-primary="" data-startref="ix_ks_euphoria_ch8" data-type="indexterm" id="idm46762853358880"/><a contenteditable="false" data-primary="" data-startref="ix_mod_contra_euphoria_ch82" data-type="indexterm" id="idm46762853357664"/><a contenteditable="false" data-primary="" data-startref="ix_contra_euphoria_ch82" data-type="indexterm" id="idm46762853356448"/><a contenteditable="false" data-primary="" data-startref="ix_euphoria_patt_ch82" data-type="indexterm" id="idm46762853355232"/>.</p>
<table id="table8-7">
<caption><span class="label">Table 8-7. </span>K’s candlesticks with Euphoria pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>46.29%</td>
<td>1.02</td>
<td>1.18</td>
<td>3916</td>
</tr>
<tr>
<td>USDCHF</td>
<td>44.73%</td>
<td>0.91</td>
<td>1.13</td>
<td>3798</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>46.15%</td>
<td>1.00</td>
<td>1.16</td>
<td>4446</td>
</tr>
<tr>
<td>USDCAD</td>
<td>45.64%</td>
<td>0.99</td>
<td>1.18</td>
<td>4296</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>46.71%</td>
<td>1.01</td>
<td>1.15</td>
<td>3303</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>45.14%</td>
<td>0.98</td>
<td>1.19</td>
<td>1327</td>
</tr>
<tr>
<td>GOLD</td>
<td>47.40%</td>
<td>1.03</td>
<td>1.14</td>
<td>597</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>48.08%</td>
<td>1.27</td>
<td>1.37</td>
<td>522</td>
</tr>
<tr>
<td>FTSE100</td>
<td>48.13%</td>
<td>1.11</td>
<td>1.2</td>
<td>698</td>
</tr>
</tbody>
</table>
</div></section>
<section class="pagebreak-before" data-pdf-bookmark="Detecting the Double Trouble Pattern" data-type="sect2"><div class="sect2" id="idm46762853327248">
<h2 class="less_space">Detecting the Double Trouble Pattern</h2>
<p><a data-type="xref" href="#figure8-18">Figure 8-18</a> shows a signal<a contenteditable="false" data-primary="trend-following patterns" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_trend_dble_trble_ch82"/><a contenteditable="false" data-primary="K's Candlesticks system" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_ks_double_trouble_ch82"/><a contenteditable="false" data-primary="modern trend-following patterns" data-secondary="Double Trouble pattern" data-type="indexterm" id="ix_mod_trend_dble_trble_ch82"/><a contenteditable="false" data-primary="Double Trouble pattern" data-type="indexterm" id="ix_double_trouble_patt_ch82"/> chart on USDCHF.</p>
<figure><div class="figure" id="figure8-18"><img alt="" height="294" src="assets/mfpr_0818.png" width="600"/>
<h6><span class="label">Figure 8-18. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The currency pair is USDCHF.</h6>
</div></figure>
<p><a data-type="xref" href="#figure8-19">Figure 8-19</a> shows a signal chart on EURGBP.</p>
<figure><div class="figure" id="figure8-19"><img alt="" height="294" src="assets/mfpr_0819.png" width="600"/>
<h6><span class="label">Figure 8-19. </span>On the top, signals (estimated) on K’s candlesticks; on the bottom, the same signals on real candlesticks. The asset is EURGBP.</h6>
</div></figure>
<p class="pagebreak-before"><a data-type="xref" href="#table8-8">Table 8-8</a> summarizes the performance metrics of an algorithm that scans and trades the Double Trouble pattern on K’s candlesticks charts.</p>
<table id="table8-8">
<caption><span class="label">Table 8-8. </span>K’s candlesticks with Double Trouble pattern: performance summary table</caption>
<colgroup>
<col/>
</colgroup>
<thead>
<tr>
<th>Asset</th>
<th>Hit Ratio</th>
<th>Profit Factor</th>
<th>Risk-Reward Ratio</th>
<th>Signals</th>
</tr>
</thead>
<tbody>
<tr>
<td>EURUSD</td>
<td>50.35%</td>
<td>0.9</td>
<td>0.89</td>
<td>709</td>
</tr>
<tr>
<td>USDCHF</td>
<td>53.36%</td>
<td>1.06</td>
<td>0.93</td>
<td>624</td>
</tr>
<tr>
<td>GBPUSD</td>
<td>52.20%</td>
<td>0.98</td>
<td>0.9</td>
<td>793</td>
</tr>
<tr>
<td>USDCAD</td>
<td>50.15%</td>
<td>0.93</td>
<td>0.92</td>
<td>664</td>
</tr>
<tr>
<td>BTCUSD</td>
<td>54.67%</td>
<td>1.49</td>
<td>1.24</td>
<td>406</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>61.37%</td>
<td>2.94</td>
<td>1.85</td>
<td>334</td>
</tr>
<tr>
<td>GOLD</td>
<td>51.68%</td>
<td>1.09</td>
<td>1.02</td>
<td>743</td>
</tr>
<tr>
<td>S&amp;P500</td>
<td>55.35%</td>
<td>1.07</td>
<td>0.86</td>
<td>112</td>
</tr>
<tr>
<td>FTSE100</td>
<td>40.25%</td>
<td>0.42</td>
<td>0.62</td>
<td>77</td>
</tr>
</tbody>
</table>
<p>To summarize<a contenteditable="false" data-primary="candlestick pattern charting" data-secondary="advantages and disadvantages" data-type="indexterm" id="idm46762853285504"/><a contenteditable="false" data-primary="Heikin-Ashi system" data-secondary="advantages and disadvantages" data-type="indexterm" id="idm46762853284288"/><a contenteditable="false" data-primary="K's Candlesticks system" data-secondary="advantages and disadvantages" data-type="indexterm" id="idm46762853283072"/>, different charting systems are useful in offering different views of the price action. Each system has its advantages and disadvantages. <a data-type="xref" href="#table8-9">Table 8-9</a> summarizes some key points about charting systems<a contenteditable="false" data-primary="" data-startref="ix_mod_trend_dble_trble_ch82" data-type="indexterm" id="idm46762853280704"/><a contenteditable="false" data-primary="" data-startref="ix_trend_dble_trble_ch82" data-type="indexterm" id="idm46762853279488"/><a contenteditable="false" data-primary="" data-startref="ix_double_trouble_patt_ch82" data-type="indexterm" id="idm46762853278272"/><a contenteditable="false" data-primary="" data-startref="ix_ks_double_trouble_ch82" data-type="indexterm" id="idm46762853277056"/><a contenteditable="false" data-primary="" data-startref="ix_ks_candl_ch8" data-type="indexterm" id="idm46762853275840"/><a contenteditable="false" data-primary="" data-startref="ix_candle_chart_ks" data-type="indexterm" id="idm46762853274624"/>.</p>
<table id="table8-9">
<caption><span class="label">Table 8-9. </span>Comparison of different candlestick charting systems</caption>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Charting system</th>
<th>Advantages</th>
<th>Disadvantages</th>
</tr>
</thead>
<tbody>
<tr>
<td>Candlestick chart</td>
<td>Real prices and ease of interpretation</td>
<td>Noisy</td>
</tr>
<tr>
<td>Heikin-Ashi chart</td>
<td>Better trend interpretability due to smoothing</td>
<td>Small lag and unreal prices</td>
</tr>
<tr>
<td>K’s candlestick chart</td>
<td>Better trend interpretability due to extra smoothing</td>
<td>Bigger lag and unreal prices</td>
</tr>
</tbody>
</table>
</div></section>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="idm46762853675456"><sup><a href="ch08.xhtml#idm46762853675456-marker">1</a></sup> The OHLC data.</p></div></div></section></div></body></html>